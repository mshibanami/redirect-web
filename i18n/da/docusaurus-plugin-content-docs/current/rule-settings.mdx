# Regelindstillinger

Denne side giver detaljerede oplysninger om hver indstilling på skærmen *Rediger regel* i RedirectWeb-appen.

## Indstillinger

### Type {#type}

Angiv **Type**-indstillingen for at styre, hvordan appen håndterer omdirigering. Du kan vælge mellem disse:

*   **Original** (Standard)
    *   Denne bruger traditionelle Web API'er til at styre omdirigering. Derudover bruger den [Tabs API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) som en fallback.
        *   I Firefox bruger den [WebRequest API](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest) til at håndtere omdirigering.
    *   Du kan bruge alle indstillingerne bortset fra [Ressourcetyper](#resource-types) og [Anmodningsmetoder](#request-methods).
    *   Dette er langsommere end *Deklarativ*-typen og kan forårsage ekstra netværksanmodninger.
*   **DNR** (Eksperimentel for Safari):
    *   Denne type fungerer meget hurtigere end Original-typen, fordi den ikke initierer en netværksanmodning for kilde-URL'en.
    *   Dette giver dig mulighed for at angive [Ressourcetyper](#resource-types) og [Anmodningsmetoder](#request-methods).
    *   ⚠️ Du kan ikke bruge nogle indstillinger, såsom [Behandling af fangstgrupper](#capturing-group-processing) og [Udelukkede URL-mønstre](#excluded-url-patterns), da de endnu ikke er understøttet af DNR API'en.
    *   ⚠️ I Safari kan du i øjeblikket ikke inkludere pipes (`|`) i dit regulære udtryksmønster. [Detaljer](https://github.com/mshibanami/redirect-web/issues/44)
    *   ⚠️ Da Safaris DNR API stadig har nogle problemer, anser vi det stadig for at være en eksperimentel funktion for Safari. Du kan finde listen over alle kendte problemer [her](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari).

### Omdiriger fra {#redirect-from}

**Omdiriger fra**-indstillingen giver dig mulighed for at angive et URL-mønster for websider, du vil omdirigere fra. Du kan vælge enten [Jokertegn](#url-pattern-wildcard) eller [Regulært udtryk](#url-pattern-regular-expression).

For eksempel, hvis du angiver `https://example.com/*` med Jokertegn, matcher det `https://example.com/` eller `https://example.com/hello`.

> [!NOTE]
> I Omdiriger til-indstillingen kan du referere til hele matchet ved hjælp af `$0` eller delvise matches ved hjælp af `$1`, `$2`, ... Kontroller detaljerne i [URL-mønster](#url-pattern) på denne side.

#### Ressourcetyper {#resource-types}

![Understøttede typer: DNR](https://img.shields.io/badge/Types-DNR-blue)

**Ressourcetyper**-indstillingen lader dig angive kategorierne af webanmodninger, såsom billeder, JavaScripts og typografiark, som reglen gælder for.
For eksempel, hvis du indstiller `script`, kan du omdirigere JavaScript-filerne, der indlæses af websider.

I øjeblikket er disse tilgængelige: 
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

Standardindstillingen er `main_frame`, som er den øverste side, der indlæses i en fane.

Kontroller venligst detaljerne for hver ressourcetype i [mdn web docs](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Anmodningsmetoder {#request-methods}

![Understøttede typer: DNR](https://img.shields.io/badge/Types-DNR-blue)

**Anmodningsmetoder**-indstillingen lader dig indstille de målrettede HTTP-metoder for kilde-URL'en.

Alle metoder er indstillet som standard.

Kontroller venligst detaljerne for hver metode i [mdn web docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> I Safari er denne indstilling muligvis ikke tilgængelig, fordi Apples implementering af DNR-typen tilsyneladende ikke håndterer den i øjeblikket. Vi sendte feedback til Apple som FB14502272.

#### Målbrowsere {#target-browsers}

![Understøttede platforme: macOS](https://img.shields.io/badge/Platforms-macOS-white)

**Målbrowsere**-indstillingen giver dig mulighed for at angive, hvilken browser reglen skal eller ikke skal anvendes på.

*   Der er 2 typer browsere, du kan vælge:
    *   **Browsere, du kan vælge som standard**: Du kan vælge Safari, Chrome, Firefox, Edge, Opera, Arc, Brave og Vivaldi som standard. Dette differentierer ikke varianter af den samme browser, såsom Safari og Safari Technology Preview.
    *   **Brugerdefinerede browsere**: Ved at trykke på knappen Tilføj i popoveren, kan du vælge enhver browser udover Safari eller Safari Technology Preview, der har RedirectWeb-udvidelsen installeret.
*   Afkrydsningsfeltet **Alle undtagen valgte** lader dig målrette alle browsere undtagen dem, du har valgt.

> [!WARNING]
> RedirectWeb kan ikke differentiere, om browseren er **Safari** eller **Safari Technology Preview**, fordi appen kontrollerer udvidelsens overordnede proces for at registrere den, men disse to browsere deler den samme overordnede proces (`/sbin/launchd`).

### Omdiriger til {#redirect-to}

**Omdiriger til**-indstillingen angiver en destinations-URL, du ønsker at omdirigere til, fra kilde-URL'en, der matcher med *Omdiriger fra*-indstillingen. Du kan også erstatte fangstgrupper med `$1`, `$2`, ... eller hele matchet med `$0`. Disse hjælper dig med dynamisk at angive destinationen. Kontroller detaljerne i [URL-mønster](#url-pattern) på denne side.

For eksempel, hvis du indstiller følgende regel:

*   **Omdiriger fra**: `https://google.com/*` (Jokertegn)
*   **Omdiriger til**: `https://apple.com/$1`

og det matcher `https://google.com/hello`, så vil destinations-URL'en være `https://apple.com/hello`.

Derudover kan du ændre teksterne i `$1`, `$2`, ... før du foretager erstatninger. Kontroller afsnittet [Behandling af fangstgrupper](#capturing-group-processing) for detaljer.

> [!TIP]
> Du kan angive et brugerdefineret URL-skema for at åbne en app. Disse er eksempler på apps, der understøtter dybdelinks:
>
> *   Figma: `figma://file/Your_Figma_ID`
> *   Firefox: `firefox://open-url?url=https://example.com/hello`
> *   Google Chrome: `googlechromes://example.com`
> *   Microsoft Edge: `microsoft-edge://example.com`
> *   Notion: `notion://www.notion.so/Your_Note_ID`
> *   Slack: `slack://open`

#### Applikation {#application}

![Understøttede typer: Original](https://img.shields.io/badge/Types-Original-blue) ![Understøttede platforme: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Hvis du vil angive en app, du ønsker at åbne destinations-URL'en med, skal du bruge **Applikation**-kombinationsboksen. Dette er kun tilgængeligt på macOS.

> [!WARNING]
> Du kan kun åbne en app, der understøtter [App Sandbox](https://developer.apple.com/documentation/security/app_sandbox). Sørg også for, at appen understøtter åbning af den URL, du vil åbne.

### Behandling af fangstgrupper {#capturing-group-processing}

![Understøttede typer: Original](https://img.shields.io/badge/Types-Original-blue)

**Behandling af fangstgrupper**-indstillingen giver dig mulighed for at angive, hvordan de fangne grupper, du kan erstatte i *Omdiriger til*-indstillingen med `$1`, `$2`..., skal behandles.

Sådan oprettes fangstgrupper:

*   **Jokertegn**: Tekster, der matcher med `*` og `?`, fanges automatisk.
*   **Regulært udtryk**: Tekster, der matcher med en del af mønsteret inden i `()`, fanges.

Du kan vælge en eller flere af følgende processer:

*   **URL-kodning/afkodning**: Dette anvender [procentkodning](https://en.wikipedia.org/wiki/Percent-encoding) eller afkodning på en fangstgruppe. For eksempel, hvis du koder `https://example.com/hello`, konverteres det til `https%3A%2F%2Fexample.com%2Fhello`. Afkodning fungerer på den modsatte måde.
*   **Base64-kodning/afkodning**: Dette afkoder/koder en tekst til [Base64](https://en.wikipedia.org/wiki/Base64). For eksempel kan du kode `hello` til `aGVsbG8=`, og afkode det tilbage til `hello`.
*   **Erstat forekomster**: Dette erstatter et eller flere tegn i en gruppe, der matches af et **Mål**, med en **Erstatning**. For eksempel, hvis *Gruppe* er `hello` og *Mål* er `l` og Erstatning er `y`, ændres det til `heyyo`.

> [!NOTE]
> Dette er til behandling af hver fangstgruppe, og det påvirker ikke, hvilke URL'er der udelukkes af [Udelukkede URL-mønstre](#excluded-url-patterns). Lad os for eksempel sige, at du har denne regel:
>
> *   **Omdiriger fra**: `https://example.com/(hello.*)`
> *   **Behandling af fangstgrupper**:
>     *   Gruppe: `$1`
>     *   Mål: `.*` (Regulært udtryk)
>     *   Erstatning: `hello`
> *   **Udelukket URL-mønster**: `https://example.com/hello`
>
> I dette tilfælde vil `https://example.com/hello_world` ikke blive udelukket, mens `https://example.com/hello` vil blive udelukket.

### Udelukkede URL-mønstre {#excluded-url-patterns}

![Understøttede typer: Original](https://img.shields.io/badge/Types-Original-blue)

**Udelukkede URL-mønstre**-indstillingen giver dig mulighed for at angive de URL'er, der ikke omdirigeres. Dette kan være nyttigt for at undgå omdirigeringssløjfer eller for at udelukke visse dele af et websted fra at blive omdirigeret.

Du kan angive udelukkede URL-mønstre ved hjælp af enten regulære udtryk eller jokertegnmønstre.

### Eksempler {#examples}

**Eksempler**-indstillingen giver dig mulighed for at teste din omdirigeringsregel ved at angive eksempel-URL'er. Ved at tilføje en eksempel-URL kan du kontrollere, om reglen fungerer som forventet, før du faktisk anvender den.

### Kommentarer {#comments}

**Kommentarer**-indstillingen giver dig mulighed for at tilføje noter eller kommentarer om din omdirigeringsregel. Dette kan være nyttigt for at holde styr på, hvorfor du oprettede en specifik regel, eller for at give kontekst til andre, der måtte se dine regler.

Du kan skrive kommentarer i følgende formater:

*   **Almindelig tekst** (Standard): Simpel tekst uden formatering.
*   **Markdown**: Du kan bruge [GitHubs Markdown-syntaks](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax), inklusive nogle udvidelser, som GFM ikke understøtter. For eksempel kan du oprette overskrifter, lister, links og mere.
*   **AsciiDoc**: Du kan bruge [AsciiDoc-syntaks](https://asciidoc.org/) til at formatere dine kommentarer.

## URL-mønster {#url-pattern}

**URL-mønstre** bruges til at matche URL'er i indstillingerne *Omdiriger fra*, *Udelukkede URL-mønstre* og *Behandling af fangstgrupper*. For at angive dem kan du vælge enten **Jokertegn** eller **Regulært udtryk**.

### Jokertegn {#url-pattern-wildcard}

**Jokertegn** er en enklere mønstertype, der giver dig mulighed for at bruge `*` (matcher alt) og `?` (matcher et enkelt tegn) som jokertegn. Her er nogle eksempler:

*   For at matche `https://example.com/hello`, kan du bruge `https://example.com/*`. Dette vil matche enhver streng efter `https://example.com/`.
*   For at matche `https://example.com/search?q=hello`, kan du bruge `https://example.com/search?q=*`. Dette vil matche enhver værdi for `q`-parameteren.
*   For at matche enhver URL, der indeholder ordet `blog`, kan du bruge `*blog*`.

Du kan også bruge substitution i Jokertegn, hvilket betyder, at du kan referere til dele af den matchede URL ved hjælp af `$1`, `$2` osv. For eksempel, hvis du bruger `https://example.com/*-world-*`, og URL'en er `https://example.com/hello-world-goodbye`, så vil `$1` være "hello" og `$2` være "goodbye". `$0` er også tilgængelig for at referere til hele den matchede URL.

> [!NOTE]
> Selvom substitution er en funktion af regulære udtryk, kan du også bruge den til Jokertegn, fordi RedirectWeb internt konverterer Jokertegn til regulære udtryk.

### Regulært udtryk {#url-pattern-regular-expression}

**Regulært udtryk** (Regex) er et kraftfuldt værktøj til at matche mønstre i tekst og bruges også bredt i programmering. Det giver dig mulighed for at definere et specifikt mønster, der matcher et sæt strenge. Her er nogle eksempler.

-   For at matche `https://example.com/hello`, kan du bruge `https://example.com/.*`. Dette vil matche enhver streng efter `https://example.com/`.
-   For at matche `https://example.com/search?q=hello`, kan du bruge `https://example.com/search\?q=(.*)`. Dette vil matche værdien af `q`-parameteren og gemme den i en fangstgruppe. Du kan derefter referere til den ved hjælp af `$1` i *Omdiriger til*-indstillingen.
-   For at matche enhver URL, der indeholder ordet `blog`, kan du bruge `.*blog.*`.

Du kan referere til fangstgrupperne i *Omdiriger til* eller *Erstatning* ved hjælp af `$1`, `$2`, ... eller `$0` for at referere til hele matchet.

RedirectWeb er drevet af [Apples Regex-motor](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042).

Mere information om Regex-syntaks kan findes i ressourcer som [RegExr](https://regexr.com/).

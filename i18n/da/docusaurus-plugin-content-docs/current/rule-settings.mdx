# Regelindstillinger

Denne side giver detaljeret information om hver indstilling i skærmen Rediger regel i Redirect Web-appen.

## Indstillinger

### Type {#type}

Angiv **Type**-indstillingen for at styre, hvordan appen håndterer omdirigering. Du kan vælge mellem disse:

* **Original** (Standard)
    * Denne bruger traditionelle Web API'er til at styre omdirigering. Derudover bruger den [Tabs API'en](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) som en fallback.
        * I Firefox bruger den [WebRequest API'en](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest) til at håndtere omdirigering.
    * Du kan bruge alle indstillingerne bortset fra [Ressourcetyper](#resource-types) og [Anmodningsmetoder](#request-methods).
    * Dette er langsommere end den *Deklarative* type og kan forårsage ekstra netværksanmodninger.
* **DNR** (Eksperimentel for Safari):
    * Denne type fungerer meget hurtigere end den originale type, fordi den ikke initierer en netværksanmodning for kilde-URL'en.
    * Dette giver dig mulighed for at angive [Ressourcetyper](#resource-types) og [Anmodningsmetoder](#request-methods).
    * ⚠️ Du kan ikke bruge nogle indstillinger, såsom [Behandling af fangstgruppe](#capturing-group-processing) og [Udelukkede URL-mønstre](#excluded-url-patterns), da de endnu ikke er understøttet af DNR API'en.
    * ⚠️ I Safari kan du i øjeblikket ikke inkludere pipes (`|`) i dit regulære udtryksmønster. [Detaljer](https://github.com/mshibanami/redirect-web/issues/44)
    * ⚠️ Da Safaris DNR API stadig har nogle problemer, betragter vi det stadig som en eksperimentel funktion for Safari. Du kan finde listen over alle kendte problemer [her](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari).

### Omdiriger fra {#redirect-from}

Indstillingen **Omdiriger fra** giver dig mulighed for at angive et URL-mønster for websider, du vil omdirigere fra. Du kan vælge enten [Wildcard](#wildcard) eller [Regulært udtryk](#regular-expression).

Hvis du f.eks. angiver `https://example.com/*` med Wildcard, matcher det `https://example.com/` eller `https://example.com/hello`.

> [!NOTE]
> I indstillingen Omdiriger til kan du referere til hele matchet ved hjælp af `$0` eller delvise matches ved hjælp af `$1`, `$2`, ... Se detaljerne i [URL-mønster](#url-pattern) på denne side.

#### Ressourcetyper {#resource-types}

![Understøttede typer: DNR](https://img.shields.io/badge/Types-DNR-blue)

Indstillingen **Ressourcetyper** giver dig mulighed for at angive kategorierne af webanmodninger, såsom billeder, JavaScripts og typografiark, som reglen gælder for.
Hvis du f.eks. indstiller `script`, kan du omdirigere de JavaScript-filer, der indlæses af websider.

Disse er i øjeblikket tilgængelige: 
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

Standardindstillingen er `main_frame`, som er den øverste side, der indlæses i en fane.

Se venligst detaljerne for hver ressourcetype i [mdn web docs](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Anmodningsmetoder {#request-methods}

![Understøttede typer: DNR](https://img.shields.io/badge/Types-DNR-blue)

Indstillingen **Anmodningsmetoder** giver dig mulighed for at indstille mål-HTTP-metoderne for kilde-URL'en.

Alle metoder er indstillet som standard.

Se venligst detaljerne for hver metode i [mdn web docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> I Safari er denne indstilling muligvis ikke tilgængelig, da Apples implementering af DNR-typen tilsyneladende ikke håndterer den i øjeblikket. Vi sendte feedback til Apple som FB14502272.

#### Mål-browsere {#target-browsers}

![Understøttede platforme: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Indstillingen **Mål-browsere** giver dig mulighed for at angive, hvilken browser reglen skal eller ikke skal anvendes på.

* Der er 2 typer browsere, du kan vælge:
    * **Browsere du kan vælge som standard**: Du kan som standard vælge Safari, Chrome, Firefox, Edge, Opera, Arc, Brave og Vivaldi. Dette skelner ikke mellem varianter af den samme browser, såsom Safari og Safari Technology Preview.
    * **Brugerdefinerede browsere**: Ved at trykke på Tilføj-knappen på popoveren, kan du vælge enhver browser udover Safari eller Safari Technology Preview, der har Redirect Web-udvidelsen installeret.
* Afkrydsningsfeltet **Alle undtagen valgte** giver dig mulighed for at målrette alle browsere undtagen dem, du har valgt.

> [!WARNING]
> Redirect Web kan ikke skelne, om browseren er **Safari** eller **Safari Technology Preview**, fordi appen kontrollerer udvidelsens overordnede proces for at registrere den, men disse to browsere deler den samme overordnede proces (`/sbin/launchd`).

### Omdiriger til {#redirect-to}

Indstillingen **Omdiriger til** angiver en destinations-URL, du ønsker at omdirigere til, fra kilde-URL'en, der matcher indstillingen *Omdiriger fra*. Du kan også erstatte fangstgrupper med `$1`, `$2`, ... eller hele matchet med `$0`. Disse hjælper dig med dynamisk at angive destinationen. Se detaljerne i [URL-mønster](#url-pattern) på denne side.

Hvis du f.eks. indstiller følgende regel:

* **Omdiriger fra**: `https://google.com/*` (Wildcard)
* **Omdiriger til**: `https://apple.com/$1`

og den matcher `https://google.com/hello`, så vil destinations-URL'en være `https://apple.com/hello`.

Derudover kan du ændre teksterne i `$1`, `$2`, ... før du foretager substitutioner. Se afsnittet [Behandling af fangstgruppe](#capturing-group-processing) for detaljer.

> [!TIP]
> Du kan angive et brugerdefineret URL-skema for at åbne en app. Disse er eksempler på apps, der understøtter dybdelinkning:
>
> * Figma: `figma://file/Your_Figma_ID`
> * Firefox: `firefox://open-url?url=https://example.com/hello`
> * Google Chrome: `googlechromes://example.com`
> * Microsoft Edge: `microsoft-edge://example.com`
> * Notion: `notion://www.notion.so/Your_Note_ID`
> * Slack: `slack://open`

#### Applikation {#application}

![Understøttede typer: Original](https://img.shields.io/badge/Types-Original-blue) ![Understøttede platforme: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Hvis du vil angive en app, du ønsker at åbne destinations-URL'en med, skal du bruge rullemenuen **Applikation**. Dette er kun tilgængeligt på macOS.

> [!WARNING]
> Du kan kun åbne en app, der understøtter [App Sandbox](https://developer.apple.com/documentation/security/app_sandbox). Sørg også for, at appen understøtter åbning af den URL, du vil åbne.

### Behandling af fangstgruppe {#capturing-group-processing}

![Understøttede typer: Original](https://img.shields.io/badge/Types-Original-blue)

Indstillingen **Behandling af fangstgruppe** giver dig mulighed for at angive, hvordan de fangne grupper, du kan erstatte i indstillingen *Omdiriger til* med `$1`, `$2`... skal behandles.

Sådan oprettes fangstgrupper:

* **Wildcard**: Tekster, der matcher med `*` og `?`, fanges automatisk.
* **Regulært udtryk**: Tekster, der matcher med en del af mønsteret inden for `()`, fanges.

Du kan vælge en eller flere af følgende processer:

* **URL-kodning/afkodning**: Dette anvender [procentkodning](https://en.wikipedia.org/wiki/Percent-encoding) eller afkodning på en fangstgruppe. Hvis du f.eks. koder `https://example.com/hello`, konverteres det til `https%3A%2F%2Fexample.com%2Fhello`. Afkodning fungerer omvendt.
* **Base64-kodning/afkodning**: Dette afkoder/koder en tekst til [Base64](https://en.wikipedia.org/wiki/Base64). Du kan f.eks. kode `hello` til `aGVsbG8=`, og afkode det tilbage til `hello`.
* **Erstat forekomster**: Dette erstatter et eller flere tegn i en gruppe, der matches af et **Mål**, med en **Erstatning**. Hvis f.eks. *Gruppen* er `hello`, og *Målet* er `l`, og Erstatningen er `y`, ændres det til `heyyo`.

> [!NOTE]
> Dette er til behandling af hver fangstgruppe, og det påvirker ikke, hvilke URL'er der udelukkes af [Udelukkede URL-mønstre](#excluded-url-patterns). Lad os f.eks. sige, at du har denne regel:
>
> * **Omdiriger fra**: `https://example.com/(hello.*)`
> * **Behandling af fangstgruppe**:
>     * Gruppe: `$1`
>     * Mål: `.*` (Regulært udtryk)
>     * Erstatning: `hello`
> * **Udelukket URL-mønster**: `https://example.com/hello`
>
> I dette tilfælde vil `https://example.com/hello_world` ikke blive udelukket, mens `https://example.com/hello` vil blive udelukket.

### Udelukkede URL-mønstre {#excluded-url-patterns}

![Understøttede typer: Original](https://img.shields.io/badge/Types-Original-blue)

Indstillingen **Udelukkede URL-mønstre** giver dig mulighed for at angive de URL'er, der ikke omdirigeres. Dette kan være nyttigt for at undgå omdirigeringssløjfer eller for at udelukke visse dele af et websted fra at blive omdirigeret.

Du kan angive udelukkede URL-mønstre ved hjælp af enten regulære udtryk eller Wildcard-mønstertyper.

### Eksempler {#examples}

Indstillingen **Eksempler** giver dig mulighed for at teste din omdirigeringsregel ved at angive eksempel-URL'er. Ved at tilføje en eksempel-URL kan du kontrollere, om reglen fungerer som forventet, før du faktisk anvender den.

### Kommentarer {#comments}

Indstillingen **Kommentarer** giver dig mulighed for at tilføje noter eller kommentarer om din omdirigeringsregel. Dette kan være nyttigt for at holde styr på, hvorfor du oprettede en specifik regel, eller for at give kontekst til andre, der måtte se dine regler.

## URL-mønster {#url-pattern}

Der er 3 muligheder, hvor du kan angive et eller flere URL-mønstre. *Omdiriger fra*, *Udelukkede URL-mønstre* og *Behandling af fangstgruppe*. For at angive dem kan du vælge enten **Wildcard** eller **Regulært udtryk**.

### Wildcard {#url-pattern-wildcard}

**Wildcard** er en enklere mønstertype, der giver dig mulighed for at bruge `*` (matcher alt) og `?`  (matcher et enkelt tegn) som wildcards. Her er nogle eksempler:

* For at matche `https://example.com/hello`, kan du bruge `https://example.com/*`. Dette vil matche enhver streng efter `https://example.com/`.
* For at matche `https://example.com/search?q=hello`, kan du bruge `https://example.com/search?q=*`. Dette vil matche enhver værdi for `q`-parameteren.
* For at matche enhver URL, der indeholder ordet `blog`, kan du bruge `*blog*`.

Du kan også bruge substitution i Wildcard, hvilket betyder, at du kan referere til dele af den matchede URL ved hjælp af `$1`, `$2`, osv. Hvis du f.eks. bruger `https://example.com/*-world-*`, og URL'en er `https://example.com/hello-world-goodbye`, så vil `$1` være "hello" og `$2` vil være "goodbye". `$0` er også tilgængelig for at referere til hele den matchede URL.

> [!NOTE]
> Selvom substitution er en funktion af regulære udtryk, kan du også bruge den til Wildcard, fordi Redirect Web internt konverterer Wildcard til regulære udtryk.

### Regulært udtryk {#url-pattern-regular-expression}

**Regulært udtryk** (Regex) er et kraftfuldt værktøj til at matche mønstre i tekst, drevet af Apples regulære udtryksmotor, som er beskrevet [her](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042). Det giver dig mulighed for at definere et specifikt mønster, der matcher et sæt strenge. Her er nogle eksempler.

- For at matche `https://example.com/hello`, kan du bruge `https://example.com/(.*)`. Dette vil matche enhver streng efter `https://example.com/` og gemme den i en fangstgruppe.
- For at matche `https://example.com/search?q=hello`, kan du bruge `https://example.com/search\?q=(.*)`. Dette vil matche værdien af `q`-parameteren og gemme den i en fangstgruppe.
- For at matche enhver URL, der indeholder ordet `blog`, kan du bruge `.*blog.*`.

Du kan referere til fangstgrupperne i *Omdiriger til* eller *Erstatning* ved hjælp af `$1`, `$2`, ... eller `$0` for at referere til hele matchet.

Mere information om Regex-syntaks kan findes i ressourcer som [RegExr](https://regexr.com/).

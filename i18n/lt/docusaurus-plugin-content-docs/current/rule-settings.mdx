# Taisyklės nustatymai

Šiame puslapyje pateikiama išsami informacija apie kiekvieną nustatymą „Redirect Web“ programos taisyklių redagavimo ekrane.

## Parinktys

### Tipas {#type}

Nurodykite parinktį **Tipas**, kad valdytumėte, kaip programa tvarko nukreipimą. Galite pasirinkti iš šių:

*   **Originalus** (Numatytasis)
    *   Tam naudojamos tradicinės žiniatinklio API, skirtos nukreipimui valdyti. Be to, kaip atsarginę priemonę naudojama [„Tabs API“](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs).
        *   „Firefox“ naršyklėje nukreipimui tvarkyti naudojama [„WebRequest API“](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest).
    *   Galite naudoti visas parinktis, išskyrus [išteklių tipus](#resource-types) ir [užklausos metodus](#request-methods).
    *   Tai lėčiau nei *deklaratyvusis* tipas ir gali sukelti papildomų tinklo užklausų.
*   **DNR** (Eksperimentinis „Safari“ naršyklei):
    *   Šis tipas veikia daug greičiau nei originalus tipas, nes jis neinicijuoja tinklo užklausos šaltinio URL.
    *   Tai leidžia nurodyti [išteklių tipus](#resource-types) ir [užklausos metodus](#request-methods).
    *   ⚠️ Negalite naudoti kai kurių parinkčių, tokių kaip [grupės fiksavimo apdorojimas](#capturing-group-processing) ir [išskirtiniai URL šablonai](#excluded-url-patterns), nes jų dar nepalaiko DNR API.
    *   ⚠️ „Safari“ naršyklėje šiuo metu negalite įtraukti vertikalių brūkšnių (`|`) į savo reguliariosios išraiškos šabloną. [Išsami informacija](https://github.com/mshibanami/redirect-web/issues/44)
    *   ⚠️ Kadangi „Safari“ DNR API vis dar turi tam tikrų problemų, manome, kad tai vis dar yra eksperimentinė funkcija „Safari“ naršyklei. Visą žinomų problemų sąrašą galite rasti [čia](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari).

### Nukreipti iš {#redirect-from}

Parinktis **Nukreipti iš** leidžia nurodyti tinklalapių URL šabloną, iš kurio norite nukreipti. Galite pasirinkti [pakaitos simbolį](#wildcard) arba [reguliariąją išraišką](#regular-expression).

Pavyzdžiui, jei nurodysite `https://example.com/*` su pakaitos simboliu, jis atitiks `https://example.com/` arba `https://example.com/hello`.

> [!NOTE]
> Parinktyje „Nukreipti į“ galite nurodyti visą atitikmenį naudodami `$0` arba dalinius atitikmenis naudodami `$1`, `$2`, ... Išsamią informaciją rasite [URL šablone](#url-pattern) šiame puslapyje.

#### Išteklių tipai {#resource-types}

![Supported Types: DNR](https://img.shields.io/badge/Types-DNR-blue)

Parinktis **Išteklių tipai** leidžia nurodyti žiniatinklio užklausų kategorijas, pvz., paveikslėlius, „JavaScript“ ir stiliaus lapus, kurioms taikoma taisyklė.
Pavyzdžiui, jei nustatysite `script`, galite nukreipti žiniatinklio puslapių įkeltus „JavaScript“ failus.

Šiuo metu yra prieinami šie:
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

Numatytasis nustatymas yra `main_frame`, kuris yra aukščiausio lygio puslapis, įkeltas į skirtuką.

Išsamią informaciją apie kiekvieną išteklių tipą rasite [mdn web docs](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Užklausos metodai {#request-methods}

![Supported Types: DNR](https://img.shields.io/badge/Types-DNR-blue)

Parinktis **Užklausos metodai** leidžia nustatyti šaltinio URL tikslinius HTTP metodus.

Visi metodai nustatomi pagal numatytuosius nustatymus.

Išsamią informaciją apie kiekvieną metodą rasite [mdn web docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> „Safari“ naršyklėje ši parinktis gali būti neprieinama, nes „Apple“ DNR tipo diegimas šiuo metu, atrodo, jos netvarko. Išsiuntėme atsiliepimą „Apple“ kaip FB14502272.

#### Tikslinės naršyklės {#target-browsers}

![Supported Platforms: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Parinktis **Tikslinės naršyklės** leidžia nurodyti, kuriai naršyklei taisyklė turėtų būti taikoma arba netaikoma.

*   Galite pasirinkti 2 tipų naršykles:
    *   **Naršyklės, kurias galite pasirinkti pagal numatytuosius nustatymus**: Pagal numatytuosius nustatymus galite pasirinkti „Safari“, „Chrome“, „Firefox“, „Edge“, „Opera“, „Arc“, „Brave“ ir „Vivaldi“. Tai neskiria tos pačios naršyklės variantų, pvz., „Safari“ ir „Safari Technology Preview“.
    *   **Vartotojo nurodytos naršyklės**: Bakstelėdami mygtuką „Pridėti“ iššokančiajame lange, galite pasirinkti bet kurią naršyklę, išskyrus „Safari“ arba „Safari Technology Preview“, kurioje įdiegta „Redirect Web“ plėtinys.
*   Žymimasis langelis **Visi, išskyrus pasirinktus** leidžia nukreipti į visas naršykles, išskyrus tas, kurias pasirinkote.

> [!WARNING]
> „Redirect Web“ negali atskirti, ar naršyklė yra **Safari**, ar **Safari Technology Preview**, nes programa patikrina plėtinio pagrindinį procesą, kad jį aptiktų, tačiau šios dvi naršyklės dalijasi tuo pačiu pagrindiniu procesu (`/sbin/launchd`).

### Nukreipti į {#redirect-to}

Parinktis **Nukreipti į** nurodo paskirties URL, į kurį norite nukreipti iš šaltinio URL, atitinkančio parinktį *Nukreipti iš*. Taip pat galite pakeisti fiksavimo grupes su `$1`, `$2`, ... arba visą atitikmenį su `$0`. Tai padeda dinamiškai nurodyti paskirties vietą. Išsamią informaciją rasite [URL šablone](#url-pattern) šiame puslapyje.

Pavyzdžiui, jei nustatysite šią taisyklę:

*   **Nukreipti iš**: `https://google.com/*` (pakaitos simbolis)
*   **Nukreipti į**: `https://apple.com/$1`

ir ji atitinka `https://google.com/hello`, tada paskirties URL bus `https://apple.com/hello`.

Be to, galite modifikuoti `$1`, `$2`, ... tekstus prieš atlikdami pakeitimus. Išsamią informaciją rasite skyriuje [Grupės fiksavimo apdorojimas](#capturing-group-processing).

> [!TIP]
> Galite nurodyti pasirinktinę URL schemą, kad atidarytumėte programą. Štai programų, palaikančių giliąsias nuorodas, pavyzdžiai:
>
> *   „Figma“: `figma://file/Your_Figma_ID`
> *   „Firefox“: `firefox://open-url?url=https://example.com/hello`
> *   „Google Chrome“: `googlechromes://example.com`
> *   „Microsoft Edge“: `microsoft-edge://example.com`
> *   „Notion“: `notion://www.notion.so/Your_Note_ID`
> *   „Slack“: `slack://open`

#### Programa {#application}

![Supported Types: Original](https://img.shields.io/badge/Types-Original-blue) ![Supported Platforms: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Jei norite nurodyti programą, kurią norite atidaryti paskirties URL, naudokite išskleidžiamąjį sąrašą **Programa**. Tai pasiekiama tik „macOS“ sistemoje.

> [!WARNING]
> Galite atidaryti tik programą, kuri palaiko [„App Sandbox“](https://developer.apple.com/documentation/security/app_sandbox). Taip pat įsitikinkite, kad programa palaiko norimo atidaryti URL atidarymą.

### Grupės fiksavimo apdorojimas {#capturing-group-processing}

![Supported Types: Original](https://img.shields.io/badge/Types-Original-blue)

Parinktis **Grupės fiksavimo apdorojimas** leidžia nurodyti, kaip apdoroti užfiksuotas grupes, kurias galite pakeisti parinktyje *Nukreipti į* su `$1`, `$2`...

Štai kaip sukurti fiksavimo grupes:

*   **Pakaitos simbolis**: Tekstai, atitinkantys `*` ir `?`, automatiškai užfiksuojami.
*   **Reguliarioji išraiška**: Tekstai, atitinkantys dalį šablono `()` viduje, užfiksuojami.

Galite pasirinkti vieną ar daugiau iš šių procesų:

*   **URL kodavimas/dekodavimas**: Tai taiko [procentinį kodavimą](https://en.wikipedia.org/wiki/Percent-encoding) arba dekodavimą fiksavimo grupei. Pavyzdžiui, jei užkoduosite `https://example.com/hello`, jis bus konvertuotas į `https%3A%2F%2Fexample.com%2Fhello`. Dekodavimas veikia priešingai.
*   **Base64 kodavimas/dekodavimas**: Tai dekoduoja/užkoduoja tekstą į [Base64](https://en.wikipedia.org/wiki/Base64). Pavyzdžiui, galite užkoduoti `hello` į `aGVsbG8=`, ir dekoduoti atgal į `hello`.
*   **Pakeisti pasikartojimus**: Tai pakeičia vieną ar daugiau simbolių grupėje, atitinkančioje **Tikslą**, su **Pakeitimu**. Pavyzdžiui, jei *Grupė* yra `hello`, o *Tikslas* yra `l`, o Pakeitimas yra `y`, jis modifikuojamas į `heyyo`.

> [!NOTE]
> Tai skirta kiekvienos fiksavimo grupės apdorojimui ir neturi įtakos, kurie URL yra išskiriami pagal [išskirtinius URL šablonus](#excluded-url-patterns). Pavyzdžiui, tarkime, kad turite šią taisyklę:
>
> *   **Nukreipti iš**: `https://example.com/(hello.*)`
> *   **Grupės fiksavimo apdorojimas**:
>     *   Grupė: `$1`
>     *   Tikslas: `.*` (reguliarioji išraiška)
>     *   Pakeitimas: `hello`
> *   **Išskirtinis URL šablonas**: `https://example.com/hello`
>
> Šiuo atveju `https://example.com/hello_world` nebus išskirtas, o `https://example.com/hello` bus išskirtas.

### Išskirtiniai URL šablonai {#excluded-url-patterns}

![Supported Types: Original](https://img.shields.io/badge/Types-Original-blue)

Parinktis **Išskirtiniai URL šablonai** leidžia nurodyti URL, kurie nėra nukreipiami. Tai gali būti naudinga siekiant išvengti nukreipimo kilpų arba išskirti tam tikras svetainės dalis iš nukreipimo.

Galite nurodyti išskirtinius URL šablonus naudodami reguliariosios išraiškos arba pakaitos simbolių šablonų tipus.

### Pavyzdžiai {#examples}

Parinktis **Pavyzdžiai** leidžia išbandyti nukreipimo taisyklę, pateikiant pavyzdinius URL. Pridėdami pavyzdinį URL, galite patikrinti, ar taisyklė veikia taip, kaip tikėtasi, prieš ją faktiškai pritaikydami.

### Komentarai {#comments}

Parinktis **Komentarai** leidžia pridėti bet kokias pastabas ar komentarus apie jūsų nukreipimo taisyklę. Tai gali būti naudinga norint sekti, kodėl sukūrėte konkrečią taisyklę, arba pateikti kontekstą kitiems, kurie gali peržiūrėti jūsų taisykles.

## URL šablonas {#url-pattern}

Yra 3 parinktys, kuriose galite nurodyti vieną ar daugiau URL šablonų. *Nukreipti iš*, *Išskirtiniai URL šablonai* ir *Grupės fiksavimo apdorojimas*. Norėdami juos nurodyti, galite pasirinkti **Pakaitos simbolį** arba **Reguliariąją išraišką**.

### Pakaitos simbolis {#url-pattern-wildcard}

**Pakaitos simbolis** yra paprastesnis šablono tipas, leidžiantis naudoti `*` (atitinka bet ką) ir `?` (atitinka bet kurį vieną simbolį) kaip pakaitos simbolius. Štai keletas pavyzdžių:

*   Norėdami atitikti `https://example.com/hello`, galite naudoti `https://example.com/*`. Tai atitiks bet kokią eilutę po `https://example.com/`.
*   Norėdami atitikti `https://example.com/search?q=hello`, galite naudoti `https://example.com/search?q=*`. Tai atitiks bet kokią `q` parametro reikšmę.
*   Norėdami atitikti bet kurį URL, kuriame yra žodis `blog`, galite naudoti `*blog*`.

Taip pat galite naudoti pakeitimą pakaitos simbolyje, o tai reiškia, kad galite nurodyti atitinkamo URL dalis naudodami `$1`, `$2`, ir t. t. Pavyzdžiui, jei naudojate `https://example.com/*-world-*`, o URL yra `https://example.com/hello-world-goodbye`, tada `$1` būtų „hello“, o `$2` būtų „goodbye“. `$0` taip pat galima naudoti norint nurodyti visą atitikmenį.

> [!NOTE]
> Nors pakeitimas yra reguliariosios išraiškos funkcija, jį taip pat galite naudoti pakaitos simboliui, nes „Redirect Web“ viduje pakaitos simbolį konvertuoja į reguliariąją išraišką.

### Reguliarioji išraiška {#url-pattern-regular-expression}

**Reguliarioji išraiška** (Regex) yra galingas įrankis, skirtas atitikti šablonus tekste, varomas „Apple“ reguliariosios išraiškos varikliu, aprašytu [čia](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042). Tai leidžia apibrėžti konkretų šabloną, atitinkantį eilučių rinkinį. Štai keletas pavyzdžių.

-   Norėdami atitikti `https://example.com/hello`, galite naudoti `https://example.com/(.*)`. Tai atitiks bet kokią eilutę po `https://example.com/` ir išsaugos ją fiksavimo grupėje.
-   Norėdami atitikti `https://example.com/search?q=hello`, galite naudoti `https://example.com/search\?q=(.*)`. Tai atitiks `q` parametro reikšmę ir išsaugos ją fiksavimo grupėje.
-   Norėdami atitikti bet kurį URL, kuriame yra žodis `blog`, galite naudoti `.*blog.*`.

Galite nurodyti fiksavimo grupes parinktyje *Nukreipti į* arba *Pakeitimas* naudodami `$1`, `$2`, ... arba `$0`, kad nurodytumėte visą atitikmenį.

Daugiau informacijos apie „Regex“ sintaksę galima rasti tokiuose šaltiniuose kaip [RegExr](https://regexr.com/).

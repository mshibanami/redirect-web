# Noteikumu iestatījumi

Šajā lapā sniegta detalizēta informācija par katru iestatījumu lietotnes Redirect Web ekrānā Rediģēt noteikumu.

## Opcijas

### Tips {#type}

Norādiet opciju **Tips**, lai kontrolētu, kā lietotne veic novirzīšanu. Varat izvēlēties no šīm:

* **Oriģināls** (noklusējums)
    * Tiek izmantoti tradicionālie tīmekļa API, lai kontrolētu novirzīšanu. Papildus tiek izmantots [Tabs API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) kā rezerves variants.
        * Firefox pārlūkprogrammā tiek izmantots [WebRequest API](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest), lai veiktu novirzīšanu.
    * Varat izmantot visas opcijas, izņemot [Resursu tipi](#resource-types) un [Pieprasījumu metodes](#request-methods).
    * Šis tips ir lēnāks nekā *Deklaratīvais* tips un var radīt papildu tīkla pieprasījumus.
* **DNR** (eksperimentāls Safari pārlūkprogrammai):
    * Šis tips darbojas daudz ātrāk nekā oriģinālais tips, jo tas neuzsāk tīkla pieprasījumu avota URL.
    * Tas ļauj norādīt [Resursu tipus](#resource-types) un [Pieprasījumu metodes](#request-methods).
    * ⚠️ Nevarat izmantot dažas opcijas, piemēram, [Sagūstīšanas grupu apstrāde](#capturing-group-processing) un [Izslēgto URL modeļi](#excluded-url-patterns), jo tās vēl neatbalsta DNR API.
    * ⚠️ Safari pārlūkprogramā pašlaik nevarat iekļaut caurules (`|`) savā regulārās izteiksmes modelī. [Sīkāka informācija](https://github.com/mshibanami/redirect-web/issues/44)
    * ⚠️ Tā kā Safari DNR API joprojām ir dažas problēmas, mēs uzskatām, ka tā joprojām ir eksperimentāla funkcija Safari. Visu zināmo problēmu sarakstu varat atrast [šeit](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari).

### Novirzīt no {#redirect-from}

Opcija **Novirzīt no** ļauj norādīt tīmekļa lapu URL modeli, no kurām vēlaties veikt novirzīšanu. Varat izvēlēties [Aizstājējzīmi](#wildcard) vai [Regulāro izteiksmi](#regular-expression).

Piemēram, ja norādāt `https://example.com/*` ar aizstājējzīmi, tas atbilst `https://example.com/` vai `https://example.com/hello`.

> [!NOTE]
> Opcijā Novirzīt uz, varat atsaukties uz visu atbilstību, izmantojot `$0`, vai uz daļējām atbilstībām, izmantojot `$1`, `$2`, ... Sīkāku informāciju skatiet šīs lapas sadaļā [URL modelis](#url-pattern).

#### Resursu tipi {#resource-types}

![Atbalstītie tipi: DNR](https://img.shields.io/badge/Types-DNR-blue)

Opcija **Resursu tipi** ļauj norādīt tīmekļa pieprasījumu kategorijas, piemēram, attēlus, JavaScript un stilu lapas, uz kurām attiecas noteikums.
Piemēram, ja iestatāt `script`, varat novirzīt JavaScript failus, kurus ielādē tīmekļa lapas.

Pašlaik ir pieejami šādi:
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

Noklusējuma iestatījums ir `main_frame`, kas ir augstākā līmeņa lapa, kas ielādēta cilnē.

Lūdzu, pārbaudiet katra resursa tipa detaļas [mdn web docs](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Pieprasījumu metodes {#request-methods}

![Atbalstītie tipi: DNR](https://img.shields.io/badge/Types-DNR-blue)

Opcija **Pieprasījumu metodes** ļauj iestatīt avota URL mērķa HTTP metodes.

Visas metodes ir iestatītas pēc noklusējuma.

Lūdzu, pārbaudiet katras metodes detaļas [mdn web docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> Safari pārlūkprogrammā šī opcija var nebūt pieejama, jo Apple DNR tipa ieviešana pašlaik to, šķiet, neatbalsta. Mēs nosūtījām atsauksmes Apple kā FB14502272.

#### Mērķa pārlūkprogrammas {#target-browsers}

![Atbalstītās platformas: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Opcija **Mērķa pārlūkprogrammas** ļauj norādīt, uz kuru pārlūkprogrammu noteikums jāattiecina vai nav jāattiecina.

* Ir divu veidu pārlūkprogrammas, kuras varat izvēlēties:
    * **Pārlūkprogrammas, kuras varat izvēlēties pēc noklusējuma**: Pēc noklusējuma varat izvēlēties Safari, Chrome, Firefox, Edge, Opera, Arc, Brave un Vivaldi. Tas neatšķir vienas un tās pašas pārlūkprogrammas variantus, piemēram, Safari un Safari Technology Preview.
    * **Lietotāja norādītās pārlūkprogrammas**: Pieskaroties pogai Pievienot uznirstošajā logā, varat atlasīt jebkuru pārlūkprogrammu, izņemot Safari vai Safari Technology Preview, kurā ir instalēts Redirect Web paplašinājums.
* Izvēles rūtiņa **Visas, izņemot atlasītās** ļauj atlasīt visas pārlūkprogrammas, izņemot tās, kuras esat izvēlējies.

> [!WARNING]
> Redirect Web nevar atšķirt, vai pārlūkprogramma ir **Safari** vai **Safari Technology Preview**, jo lietotne pārbauda paplašinājuma primāro procesu, lai to noteiktu, bet šīs divas pārlūkprogrammas izmanto vienu un to pašu primāro procesu (`/sbin/launchd`).

### Novirzīt uz {#redirect-to}

Opcija **Novirzīt uz** norāda mērķa URL, uz kuru vēlaties novirzīt no avota URL, kas atbilst opcijai *Novirzīt no*. Varat arī aizstāt sagūstīšanas grupas ar `$1`, `$2`, ... vai visu atbilstību ar `$0`. Tie palīdz dinamiski norādīt galamērķi. Sīkāku informāciju skatiet šīs lapas sadaļā [URL modelis](#url-pattern).

Piemēram, ja iestatāt šādu noteikumu:

* **Novirzīt no**: `https://google.com/*` (Aizstājējzīme)
* **Novirzīt uz**: `https://apple.com/$1`

un tas atbilst `https://google.com/hello`, tad mērķa URL būs `https://apple.com/hello`.

Turklāt varat modificēt tekstu `$1`, `$2`, ... pirms aizstāšanas. Sīkāku informāciju skatiet sadaļā [Sagūstīšanas grupu apstrāde](#capturing-group-processing).

> [!TIP]
> Varat norādīt pielāgotu URL shēmu, lai atvērtu lietotni. Šie ir piemēri lietotnēm, kas atbalsta dziļās saites:
>
> * Figma: `figma://file/Your_Figma_ID`
> * Firefox: `firefox://open-url?url=https://example.com/hello`
> * Google Chrome: `googlechromes://example.com`
> * Microsoft Edge: `microsoft-edge://example.com`
> * Notion: `notion://www.notion.so/Your_Note_ID`
> * Slack: `slack://open`

#### Lietojumprogramma {#application}

![Atbalstītie tipi: Oriģināls](https://img.shields.io/badge/Types-Original-blue) ![Atbalstītās platformas: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Ja vēlaties norādīt lietotni, ar kuru vēlaties atvērt mērķa URL, izmantojiet kombinēto lodziņu **Lietojumprogramma**. Tas ir pieejams tikai macOS.

> [!WARNING]
> Varat atvērt tikai lietotni, kas atbalsta [App Sandbox](https://developer.apple.com/documentation/security/app_sandbox). Tāpat pārliecinieties, vai lietotne atbalsta URL atvēršanu, kuru vēlaties atvērt.

### Sagūstīšanas grupu apstrāde {#capturing-group-processing}

![Atbalstītie tipi: Oriģināls](https://img.shields.io/badge/Types-Original-blue)

Opcija **Sagūstīšanas grupu apstrāde** ļauj norādīt, kā apstrādāt sagūstītās grupas, kuras varat aizstāt opcijā *Novirzīt uz* ar `$1`, `$2`...

Lūk, kā veidot sagūstīšanas grupas:

* **Aizstājējzīme**: Teksti, kas atbilst `*` un `?`, tiek automātiski sagūstīti.
* **Regulārā izteiksme**: Teksti, kas atbilst modeļa daļai iekš `()`, tiek sagūstīti.

Varat izvēlēties vienu vai vairākus no šiem procesiem:

* **URL kodēšana/dekodēšana**: Tas lieto [procentu kodēšanu](https://en.wikipedia.org/wiki/Percent-encoding) vai dekodēšanu sagūstīšanas grupai. Piemēram, ja kodējat `https://example.com/hello`, tas tiek konvertēts uz `https%3A%2F%2Fexample.com%2Fhello`. Dekodēšana darbojas pretēji.
* **Base64 kodēšana/dekodēšana**: Tas dekodē/kodē tekstu uz [Base64](https://en.wikipedia.org/wiki/Base64). Piemēram, varat kodēt `hello` uz `aGVsbG8=`, un dekodēt to atpakaļ uz `hello`.
* **Aizstāt atkārtojumus**: Tas aizstāj vienu vai vairākus rakstzīmes grupā, kas atbilst **Mērķim**, ar **Aizstājēju**. Piemēram, ja *Grupa* ir `hello` un *Mērķis* ir `l` un Aizstājējs ir `y`, tas tiek modificēts uz `heyyo`.

> [!NOTE]
> Tas ir paredzēts katras sagūstīšanas grupas apstrādei, un tas neietekmē, kuri URL tiek izslēgti ar [Izslēgto URL modeļiem](#excluded-url-patterns). Piemēram, pieņemsim, ka jums ir šāds noteikums:
>
> * **Novirzīt no**: `https://example.com/(hello.*)`
> * **Sagūstīšanas grupu apstrāde**:
>     * Grupa: `$1`
>     * Mērķis: `.*` (Regulārā izteiksme)
>     * Aizstājējs: `hello`
> * **Izslēgto URL modelis**: `https://example.com/hello`
>
> Šajā gadījumā `https://example.com/hello_world` netiks izslēgts, savukārt `https://example.com/hello` tiks izslēgts.

### Izslēgto URL modeļi {#excluded-url-patterns}

![Atbalstītie tipi: Oriģināls](https://img.shields.io/badge/Types-Original-blue)

Opcija **Izslēgto URL modeļi** ļauj norādīt URL, kas netiek novirzīti. Tas var būt noderīgi, lai izvairītos no novirzīšanas cilpām vai lai izslēgtu noteiktas tīmekļa vietnes daļas no novirzīšanas.

Izslēgtos URL modeļus varat norādīt, izmantojot regulāro izteiksmi vai aizstājējzīmju modeļa tipus.

### Piemēri {#examples}

Opcija **Piemēri** ļauj jums pārbaudīt savu novirzīšanas noteikumu, nodrošinot piemēru URL. Pievienojot piemēra URL, varat pārbaudīt, vai noteikums darbojas, kā paredzēts, pirms to faktiski piemērot.

### Komentāri {#comments}

Opcija **Komentāri** ļauj pievienot jebkādas piezīmes vai komentārus par jūsu novirzīšanas noteikumu. Tas var būt noderīgi, lai sekotu līdzi tam, kāpēc izveidojāt konkrētu noteikumu, vai lai sniegtu kontekstu citiem, kuri varētu aplūkot jūsu noteikumus.

## URL modelis {#url-pattern}

Ir 3 opcijas, kurās varat norādīt vienu vai vairākus URL modeļus. *Novirzīt no*, *Izslēgto URL modeļi* un *Sagūstīšanas grupu apstrāde*. Lai tos norādītu, varat izvēlēties vai nu **Aizstājējzīmi**, vai **Regulāro izteiksmi**.

### Aizstājējzīme {#url-pattern-wildcard}

**Aizstājējzīme** ir vienkāršāks modeļa tips, kas ļauj izmantot `*` (atbilst jebkam) un `?` (atbilst jebkurai vienai rakstzīmei) kā aizstājējzīmes. Lūk, daži piemēri:

* Lai atbilstu `https://example.com/hello`, varat izmantot `https://example.com/*`. Tas atbilsts jebkurai virknei pēc `https://example.com/`.
* Lai atbilstu `https://example.com/search?q=hello`, varat izmantot `https://example.com/search?q=*`. Tas atbilsts jebkurai vērtībai parametram `q`.
* Lai atbilstu jebkuram URL, kas satur vārdu `blog`, varat izmantot `*blog*`.

Aizstājējzīmē varat izmantot arī aizstāšanu, kas nozīmē, ka varat atsaukties uz atbilstošā URL daļām, izmantojot `$1`, `$2` utt. Piemēram, ja izmantojat `https://example.com/*-world-*` un URL ir `https://example.com/hello-world-goodbye`, tad `$1` būtu "hello" un `$2` būtu "goodbye". `$0` ir pieejams arī, lai atsauktos uz visu atbilstošo URL.

> [!Note]
> Lai gan aizstāšana ir regulāro izteiksmju funkcija, to var izmantot arī aizstājējzīmēm, jo Redirect Web iekšēji pārvērš aizstājējzīmes par regulārām izteiksmēm.

### Regulārā izteiksme {#url-pattern-regular-expression}

**Regulārā izteiksme** (Regex) ir jaudīgs rīks modeļu saskaņošanai tekstā, ko nodrošina Apple regulāro izteiksmju dzinējs, kas aprakstīts [šeit](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042). Tas ļauj definēt specifisku modeli, kas atbilst virknei tekstu. Lūk, daži piemēri.

- Lai atbilstu `https://example.com/hello`, varat izmantot `https://example.com/(.*)`. Tas atbilsts jebkurai virknei pēc `https://example.com/` un saglabās to sagūstīšanas grupā.
- Lai atbilstu `https://example.com/search?q=hello`, varat izmantot `https://example.com/search\?q=(.*)`. Tas atbilsts parametra `q` vērtībai un saglabās to sagūstīšanas grupā.
- Lai atbilstu jebkuram URL, kas satur vārdu `blog`, varat izmantot `.*blog.*`.

Varat atsaukties uz sagūstīšanas grupām *Novirzīt uz* vai *Aizstājējs* ar `$1`, `$2`, ... vai `$0`, lai atsauktos uz visu atbilstību.

Plašāku informāciju par Regex sintaksi var atrast tādos resursos kā [RegExr](https://regexr.com/).
# Regelinstellingen

Deze pagina biedt gedetailleerde informatie over elke instelling in het scherm Regel bewerken in de Redirect Web-app.

## Opties

### Type {#type}

Specificeer de optie **Type** om te bepalen hoe de app omleidingen afhandelt. Je kunt kiezen uit deze:

* **Origineel** (Standaard)
    * Dit gebruikt traditionele Web API's om omleidingen te beheren. Bovendien gebruikt het [de Tabs API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) als terugval.
        * In Firefox gebruikt het de [WebRequest API](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest) om omleidingen af te handelen.
    * Je kunt alle opties gebruiken behalve [Brontypen](#resource-types) en [Verzoekmethoden](#request-methods).
    * Dit is langzamer dan het *Declaratieve* type en kan extra netwerkverzoeken veroorzaken.
* **DNR** (Experimenteel voor Safari):
    * Dit type werkt veel sneller dan het Originele type omdat het geen netwerkverzoek initieert voor de bron-URL.
    * Hiermee kun je [Brontypen](#resource-types) en [Verzoekmethoden](#request-methods) specificeren.
    * ⚠️ Je kunt sommige opties, zoals [Verwerking van opnamegroepen](#capturing-group-processing) en [Uitgesloten URL-patronen](#excluded-url-patterns), niet gebruiken, aangezien deze nog niet worden ondersteund door de DNR API.
    * ⚠️ In Safari kun je momenteel geen pipes (`|`) in je reguliere expressiepatroon opnemen. [Details](https://github.com/mshibanami/redirect-web/issues/44)
    * ⚠️ Aangezien de DNR API van Safari nog steeds enkele problemen heeft, beschouwen we dit nog steeds als een experimentele functie voor Safari. Je kunt de lijst met alle bekende problemen [hier](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari) vinden.

### Omleiden van {#redirect-from}

De optie **Omleiden van** stelt je in staat een URL-patroon op te geven van webpagina's waarvan je wilt omleiden. Je kunt kiezen uit [Wildcard](#wildcard) of [Reguliere expressie](#regular-expression).

Als je bijvoorbeeld `https://example.com/*` met Wildcard opgeeft, komt dit overeen met `https://example.com/` of `https://example.com/hello`.

> [!NOTE]
> In de optie Omleiden naar kun je de hele overeenkomst refereren met `$0` of gedeeltelijke overeenkomsten met `$1`, `$2`, ... Controleer de details in [URL-patroon](#url-pattern) op deze pagina.

#### Brontypen {#resource-types}

![Ondersteunde typen: DNR](https://img.shields.io/badge/Types-DNR-blue)

De optie **Brontypen** stelt je in staat de categorieën van webverzoeken, zoals afbeeldingen, JavaScripts en stylesheets, te specificeren waarop de regel van toepassing is.
Als je bijvoorbeeld `script` instelt, kun je de JavaScript-bestanden die door webpagina's worden geladen, omleiden.

Momenteel zijn deze beschikbaar: 
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

De standaardinstelling is `main_frame`, wat de pagina op het hoogste niveau is die in een tabblad wordt geladen.

Please check the details of each resource type in [mdn web docs](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Verzoekmethoden {#request-methods}

![Ondersteunde typen: DNR](https://img.shields.io/badge/Types-DNR-blue)

De optie **Verzoekmethoden** stelt je in staat de doel-HTTP-methoden van de bron-URL in te stellen.

Alle methoden zijn standaard ingesteld.

Please check the details of each method in [mdn web docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> In Safari is deze optie mogelijk niet beschikbaar omdat de implementatie van Apple voor het DNR-type dit momenteel niet lijkt te ondersteunen. We hebben feedback naar Apple gestuurd als FB14502272.

#### Doelbrowsers {#target-browsers}

![Ondersteunde platforms: macOS](https://img.shields.io/badge/Platforms-macOS-white)

De optie **Doelbrowsers** stelt je in staat te specificeren op welke browser de regel wel of niet moet worden toegepast.

* Er zijn 2 typen browsers die je kunt kiezen:
    * **Browsers die je standaard kunt kiezen**: Je kunt standaard Safari, Chrome, Firefox, Edge, Opera, Arc, Brave en Vivaldi kiezen. Dit maakt geen onderscheid tussen varianten van dezelfde browser, zoals Safari en Safari Technology Preview.
    * **Door de gebruiker opgegeven browsers**: Door op de knop Toevoegen in de popover te tikken, kun je elke browser behalve Safari of Safari Technology Preview selecteren die de Redirect Web-extensie heeft geïnstalleerd.
* Het selectievakje **Alles behalve geselecteerd** stelt je in staat elke browser te targeten behalve de browsers die je hebt gekozen.

> [!WARNING]
> Redirect Web kan geen onderscheid maken tussen **Safari** en **Safari Technology Preview**, omdat de app het bovenliggende proces van de extensie controleert om dit te detecteren, maar deze twee browsers delen hetzelfde bovenliggende proces (`/sbin/launchd`).

### Omleiden naar {#redirect-to}

De optie **Omleiden naar** specificeert een doel-URL waarnaar je wilt omleiden, vanaf de bron-URL die overeenkomt met de optie *Omleiden van*. Je kunt ook opnamegroepen vervangen door `$1`, `$2`, ... of de hele overeenkomst met `$0`. Deze helpen je de bestemming dynamisch te specificeren. Controleer de details in [URL-patroon](#url-pattern) op deze pagina.

Als je bijvoorbeeld de volgende regel instelt:

* **Omleiden van**: `https://google.com/*` (Wildcard)
* **Omleiden naar**: `https://apple.com/$1`

en het komt overeen met `https://google.com/hello`, dan is de doel-URL `https://apple.com/hello`.

Bovendien kun je de teksten van `$1`, `$2`, ... wijzigen voordat je substituties maakt. Controleer de sectie [Verwerking van opnamegroepen](#capturing-group-processing) voor de details.

> [!TIP]
> Je kunt een aangepast URL-schema specificeren om een app te openen. Dit zijn voorbeelden van apps die deep linking ondersteunen:
>
> * Figma: `figma://file/Your_Figma_ID`
> * Firefox: `firefox://open-url?url=https://example.com/hello`
> * Google Chrome: `googlechromes://example.com`
> * Microsoft Edge: `microsoft-edge://example.com`
> * Notion: `notion://www.notion.so/Your_Note_ID`
> * Slack: `slack://open`

#### Applicatie {#application}

![Ondersteunde typen: Origineel](https://img.shields.io/badge/Types-Original-blue) ![Ondersteunde platforms: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Als je een app wilt specificeren waarin je de doel-URL wilt openen, gebruik dan de keuzelijst **Applicatie**. Dit is alleen beschikbaar op macOS.

> [!WARNING]
> Je kunt alleen een app openen die [App Sandbox](https://developer.apple.com/documentation/security/app_sandbox) ondersteunt. Zorg er ook voor dat de app het openen van de URL die je wilt openen ondersteunt.

### Verwerking van opnamegroepen {#capturing-group-processing}

![Ondersteunde typen: Origineel](https://img.shields.io/badge/Types-Original-blue)

De optie **Verwerking van opnamegroepen** stelt je in staat te specificeren hoe de vastgelegde groepen moeten worden verwerkt die je kunt substitueren in de optie *Omleiden naar* met `$1`, `$2`...

Dit zijn manieren om opnamegroepen te maken:

* **Wildcard**: Teksten die overeenkomen met `*` en `?` worden automatisch vastgelegd.
* **Reguliere expressie**: Teksten die overeenkomen met een deel van het patroon binnen `()` worden vastgelegd.

Je kunt een of meer van de volgende processen kiezen:

* **URL Coderen/Decoderen**: Dit past [percent-encoding](https://en.wikipedia.org/wiki/Percent-encoding) of decodering toe op een opnamegroep. Als je bijvoorbeeld `https://example.com/hello` codeert, wordt het geconverteerd naar `https%3A%2F%2Fexample.com%2Fhello`. Decoderen werkt op de tegenovergestelde manier.
* **Base64 Coderen/Decoderen**: Dit decodeert/codeert een tekst naar [Base64](https://en.wikipedia.org/wiki/Base64). Je kunt bijvoorbeeld `hello` coderen naar `aGVsbG8=`, en het terug decoderen naar `hello`.
* **Voorkomens vervangen**: Dit vervangt een of meer tekens in een groep, die overeenkomt met een **Doel**, door een **Vervanging**. Als de *Groep* bijvoorbeeld `hello` is en het *Doel* `l` en de Vervanging `y`, wordt het gewijzigd in `heyyo`.

> [!NOTE]
> Dit is voor het verwerken van elke opnamegroep en heeft geen invloed op welke URL's worden uitgesloten door de [Uitgesloten URL-patronen](#excluded-url-patterns). Stel bijvoorbeeld dat je deze regel hebt:
>
> * **Omleiden van**: `https://example.com/(hello.*)`
> * **Verwerking van opnamegroepen**: 
>     * Groep: `$1`
>     * Doel: `.*` (Reguliere expressie)
>     * Vervanging: `hello`
> * **Uitgesloten URL-patroon**: `https://example.com/hello`
>
> In dit geval wordt `https://example.com/hello_world` niet uitgesloten, terwijl `https://example.com/hello` wel wordt uitgesloten.

### Uitgesloten URL-patronen {#excluded-url-patterns}

![Ondersteunde typen: Origineel](https://img.shields.io/badge/Types-Original-blue)

De optie **Uitgesloten URL-patronen** stelt je in staat de URL's te specificeren die niet worden omgeleid. Dit kan handig zijn om omleidingslussen te voorkomen of om bepaalde delen van een website uit te sluiten van omleiding.

Je kunt uitgesloten URL-patronen specificeren met behulp van reguliere expressie- of wildcard-patroontypen.

### Voorbeelden {#examples}

De optie **Voorbeelden** stelt je in staat je omleidingsregel te testen door voorbeeld-URL's op te geven. Door een voorbeeld-URL toe te voegen, kun je controleren of de regel werkt zoals verwacht voordat je deze daadwerkelijk toepast.

### Opmerkingen {#comments}

De optie **Opmerkingen** stelt je in staat notities of opmerkingen toe te voegen over je omleidingsregel. Dit kan handig zijn om bij te houden waarom je een specifieke regel hebt gemaakt of om context te bieden voor anderen die je regels mogelijk bekijken.

## URL-patroon {#url-pattern}

Er zijn 3 opties waar je een of meer URL-patronen kunt specificeren. *Omleiden van*, *Uitgesloten URL-patronen* en *Verwerking van opnamegroepen*. Om deze te specificeren, kun je kiezen uit **Wildcard** of **Reguliere expressie**.

### Wildcard {#url-pattern-wildcard}

**Wildcard** is een eenvoudiger patroontype waarmee je `*` (komt overeen met alles) en `?` (komt overeen met elk enkel teken) als wildcards kunt gebruiken. Hier zijn enkele voorbeelden:

* Om `https://example.com/hello` te matchen, kun je `https://example.com/*` gebruiken. Dit komt overeen met elke string na `https://example.com/`.
* Om `https://example.com/search?q=hello` te matchen, kun je `https://example.com/search?q=*` gebruiken. Dit komt overeen met elke waarde voor de `q`-parameter.
* Om elke URL te matchen die het woord `blog` bevat, kun je `*blog*` gebruiken.

Je kunt ook substitutie gebruiken in Wildcard, wat betekent dat je delen van de gematchte URL kunt refereren met `$1`, `$2`, enz. Als je bijvoorbeeld `https://example.com/*-world-*` gebruikt en de URL is `https://example.com/hello-world-goodbye`, dan zou `$1` "hello" zijn en `$2` "goodbye". `$0` is ook beschikbaar om de hele gematchte URL te refereren.

> [!Note]
> Hoewel substitutie een functie van reguliere expressie is, kun je het ook gebruiken voor Wildcard, omdat Redirect Web Wildcard intern converteert naar reguliere expressie.

### Reguliere expressie {#url-pattern-regular-expression}

**Reguliere expressie** (Regex) is een krachtig hulpmiddel voor het matchen van patronen in tekst, aangedreven door de reguliere expressie-engine van Apple die [hier](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042) wordt beschreven. Hiermee kun je een specifiek patroon definiëren dat overeenkomt met een reeks strings. Hier zijn enkele voorbeelden.

- Om `https://example.com/hello` te matchen, kun je `https://example.com/(.*)` gebruiken. Dit komt overeen met elke string na `https://example.com/` en slaat deze op in een opnamegroep.
- Om `https://example.com/search?q=hello` te matchen, kun je `https://example.com/search\?q=(.*)` gebruiken. Dit komt overeen met de waarde van de `q`-parameter en slaat deze op in een opnamegroep.
- Om elke URL te matchen die het woord `blog` bevat, kun je `.*blog.*` gebruiken.

Je kunt de opnamegroepen in *Omleiden naar* of *Vervanging* refereren met `$1`, `$2`, ... of `$0` om de hele overeenkomst te refereren.

Meer informatie over Regex-syntaxis is te vinden in bronnen zoals [RegExr](https://regexr.com/).

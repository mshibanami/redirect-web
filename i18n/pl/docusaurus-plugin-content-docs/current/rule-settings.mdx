# Ustawienia reguł

Ta strona zawiera szczegółowe informacje o każdym ustawieniu na ekranie Edycji reguły w aplikacji Redirect Web.

## Opcje

### Typ {#type}

Określ opcję **Typ**, aby kontrolować sposób obsługi przekierowań przez aplikację. Możesz wybrać spośród następujących:

* **Oryginalny** (domyślny)
    * Wykorzystuje tradycyjne interfejsy API sieci Web do kontrolowania przekierowań. Dodatkowo, używa [interfejsu API kart](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) jako rozwiązania awaryjnego.
        * W przeglądarce Firefox używa [interfejsu API WebRequest](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest) do obsługi przekierowań.
    * Możesz używać wszystkich opcji innych niż [Typy zasobów](#resource-types) i [Metody żądań](#request-methods).
    * Jest to wolniejsze niż typ *Deklaratywny* i może powodować dodatkowe żądania sieciowe.
* **DNR** (eksperymentalny dla Safari):
    * Ten typ działa znacznie szybciej niż typ Oryginalny, ponieważ nie inicjuje żądania sieciowego dla źródłowego adresu URL.
    * Pozwala to określić [Typy zasobów](#resource-types) i [Metody żądań](#request-methods).
    * ⚠️ Niektóre opcje, takie jak [Przetwarzanie grup przechwytujących](#capturing-group-processing) i [Wykluczone wzorce adresów URL](#excluded-url-patterns), nie są jeszcze obsługiwane przez interfejs API DNR.
    * ⚠️ W przeglądarce Safari, obecnie nie można używać pionowych kresek (`|`) we wzorcu wyrażenia regularnego. [Szczegóły](https://github.com/mshibanami/redirect-web/issues/44)
    * ⚠️ Ponieważ interfejs API DNR w przeglądarce Safari nadal ma pewne problemy, uważamy, że jest to nadal eksperymentalna funkcja dla Safari. Listę wszystkich znanych problemów można znaleźć [tutaj](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari).

### Przekieruj z {#redirect-from}

Opcja **Przekieruj z** pozwala określić wzorzec adresu URL stron internetowych, z których chcesz przekierować. Możesz wybrać [Symbol wieloznaczny](#wildcard) lub [Wyrażenie regularne](#regular-expression).

Na przykład, jeśli określisz `https://example.com/*` z symbolem wieloznacznym, będzie to pasować do `https://example.com/` lub `https://example.com/hello`.

> [!NOTE]
> W opcji Przekieruj do, możesz odwołać się do całego dopasowania za pomocą `$0` lub częściowych dopasowań za pomocą `$1`, `$2`, ... Sprawdź szczegóły w [Wzorzec adresu URL](#url-pattern) na tej stronie.

#### Typy zasobów {#resource-types}

![Obsługiwane typy: DNR](https://img.shields.io/badge/Types-DNR-blue)

Opcja **Typy zasobów** pozwala określić kategorie żądań sieciowych, takie jak obrazy, skrypty JavaScript i arkusze stylów, do których ma zastosowanie reguła.
Na przykład, jeśli ustawisz `script`, możesz przekierować pliki JavaScript ładowane przez strony internetowe.

Obecnie dostępne są:
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

Domyślne ustawienie to `main_frame`, czyli strona najwyższego poziomu ładowana do karty.

Sprawdź szczegóły każdego typu zasobu w [dokumentacji internetowej mdn](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Metody żądań {#request-methods}

![Obsługiwane typy: DNR](https://img.shields.io/badge/Types-DNR-blue)

Opcja **Metody żądań** pozwala ustawić docelowe metody HTTP źródłowego adresu URL.

Wszystkie metody są ustawione domyślnie.

Sprawdź szczegóły każdej metody w [dokumentacji internetowej mdn](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> W przeglądarce Safari ta opcja może być niedostępna, ponieważ implementacja Apple dla typu DNR wydaje się jej obecnie nie obsługiwać. Wysyłaliśmy opinię do Apple jako FB14502272.

#### Przeglądarki docelowe {#target-browsers}

![Obsługiwane platformy: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Opcja **Przeglądarki docelowe** pozwala określić, do której przeglądarki reguła powinna lub nie powinna być stosowana.

* Istnieją 2 typy przeglądarek, które możesz wybrać:
    * **Przeglądarki, które możesz wybrać domyślnie**: Domyślnie możesz wybrać Safari, Chrome, Firefox, Edge, Opera, Arc, Brave i Vivaldi. Nie rozróżnia to wariantów tej samej przeglądarki, takich jak Safari i Safari Technology Preview.
    * **Przeglądarki określone przez użytkownika**: Dotykając przycisku Dodaj w wyskakującym okienku, możesz wybrać dowolną przeglądarkę inną niż Safari lub Safari Technology Preview, która ma zainstalowane rozszerzenie Redirect Web.
* Pole wyboru **Wszystkie oprócz wybranych** pozwala na celowanie we wszystkie przeglądarki z wyjątkiem tych, które wybrałeś.

> [!WARNING]
> Redirect Web nie potrafi rozróżnić, czy przeglądarka to **Safari** czy **Safari Technology Preview**, ponieważ aplikacja sprawdza proces nadrzędny rozszerzenia, aby to wykryć, ale te dwie przeglądarki współdzielą ten sam proces nadrzędny (`/sbin/launchd`).

### Przekieruj do {#redirect-to}

Opcja **Przekieruj do** określa docelowy adres URL, na który chcesz przekierować ze źródłowego adresu URL dopasowanego do opcji *Przekieruj z*. Możesz również podstawić grupy przechwytujące za pomocą `$1`, `$2`, ... lub całe dopasowanie za pomocą `$0`. Pomaga to dynamicznie określić miejsce docelowe. Sprawdź szczegóły w [Wzorzec adresu URL](#url-pattern) na tej stronie.

Na przykład, jeśli ustawisz następującą regułę:

* **Przekieruj z**: `https://google.com/*` (Symbol wieloznaczny)
* **Przekieruj do**: `https://apple.com/$1`

a pasuje do `https://google.com/hello`, to docelowy adres URL będzie `https://apple.com/hello`.

Dodatkowo, możesz modyfikować teksty `$1`, `$2`, ... przed dokonaniem podstawień. Sprawdź sekcję [Przetwarzanie grup przechwytujących](#capturing-group-processing), aby uzyskać szczegóły.

> [!TIP]
> Możesz określić niestandardowy schemat URL, aby otworzyć aplikację. Oto przykłady aplikacji obsługujących głębokie linkowanie:
>
> * Figma: `figma://file/Your_Figma_ID`
> * Firefox: `firefox://open-url?url=https://example.com/hello`
> * Google Chrome: `googlechromes://example.com`
> * Microsoft Edge: `microsoft-edge://example.com`
> * Notion: `notion://www.notion.so/Your_Note_ID`
> * Slack: `slack://open`

#### Aplikacja {#application}

![Obsługiwane typy: Oryginalny](https://img.shields.io/badge/Types-Original-blue) ![Obsługiwane platformy: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Jeśli chcesz określić aplikację, którą chcesz otworzyć docelowy adres URL, użyj pola kombi **Aplikacja**. Jest to dostępne tylko w systemie macOS.

> [!WARNING]
> Możesz otworzyć tylko aplikację, która obsługuje [App Sandbox](https://developer.apple.com/documentation/security/app_sandbox). Upewnij się również, że aplikacja obsługuje otwieranie adresu URL, który chcesz otworzyć.

### Przetwarzanie grup przechwytujących {#capturing-group-processing}

![Obsługiwane typy: Oryginalny](https://img.shields.io/badge/Types-Original-blue)

Opcja **Przetwarzanie grup przechwytujących** pozwala określić, jak przetwarzać przechwycone grupy, które można podstawić w opcji *Przekieruj do* za pomocą `$1`, `$2`...

Oto jak tworzyć grupy przechwytujące:

* **Symbol wieloznaczny**: Teksty dopasowane do `*` i `?` są automatycznie przechwytywane.
* **Wyrażenie regularne**: Teksty dopasowane do części wzorca wewnątrz `()` są przechwytywane.

Możesz wybrać jeden lub więcej z następujących procesów:

* **Kodowanie/dekodowanie URL**: Stosuje [kodowanie procentowe](https://en.wikipedia.org/wiki/Percent-encoding) lub dekodowanie do grupy przechwytującej. Na przykład, jeśli zakodujesz `https://example.com/hello`, zostanie to przekonwertowane na `https%3A%2F%2Fexample.com%2Fhello`. Dekodowanie działa w odwrotny sposób.
* **Kodowanie/dekodowanie Base64**: Dekoduje/koduje tekst do [Base64](https://en.wikipedia.org/wiki/Base64). Na przykład, możesz zakodować `hello` na `aGVsbG8=`, a następnie zdekodować z powrotem na `hello`.
* **Zastąp wystąpienia**: Zastępuje jeden lub więcej znaków w grupie, dopasowanych przez **Cel**, za pomocą **Zastąpienia**. Na przykład, jeśli *Grupa* to `hello`, a *Cel* to `l`, a Zastąpienie to `y`, zostanie to zmodyfikowane na `heyyo`.

> [!NOTE]
> Dotyczy to przetwarzania każdej grupy przechwytującej i nie ma wpływu na to, które adresy URL są wykluczane przez [Wykluczone wzorce adresów URL](#excluded-url-patterns). Na przykład, załóżmy, że masz taką regułę:
>
> * **Przekieruj z**: `https://example.com/(hello.*)`
> * **Przetwarzanie grup przechwytujących**:
>     * Grupa: `$1`
>     * Cel: `.*` (Wyrażenie regularne)
>     * Zastąpienie: `hello`
> * **Wykluczony wzorzec adresu URL**: `https://example.com/hello`
>
> W tym przypadku `https://example.com/hello_world` nie zostanie wykluczone, podczas gdy `https://example.com/hello` zostanie wykluczone.

### Wykluczone wzorce adresów URL {#excluded-url-patterns}

![Obsługiwane typy: Oryginalny](https://img.shields.io/badge/Types-Original-blue)

Opcja **Wykluczone wzorce adresów URL** pozwala określić adresy URL, które nie są przekierowywane. Może to być przydatne, aby uniknąć pętli przekierowań lub wykluczyć niektóre części witryny z przekierowania.

Możesz określić wykluczone wzorce adresów URL, używając typów wzorców Wyrażenie regularne lub Symbol wieloznaczny.

### Przykłady {#examples}

Opcja **Przykłady** pozwala przetestować regułę przekierowania, podając przykładowe adresy URL. Dodając przykładowy adres URL, możesz sprawdzić, czy reguła działa zgodnie z oczekiwaniami, zanim faktycznie ją zastosujesz.

### Komentarze {#comments}

Opcja **Komentarze** pozwala dodawać notatki lub komentarze dotyczące reguły przekierowania. Może to być przydatne do śledzenia, dlaczego utworzyłeś określoną regułę lub do dostarczania kontekstu innym osobom, które mogą przeglądać Twoje reguły.

Możesz pisać komentarze w następujących formatach:

* **Zwykły tekst** (domyślny): Prosty tekst bez formatowania.
* **Markdown**: Możesz używać [składni Markdown GitHub](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax), w tym niektórych rozszerzeń, których GFM nie obsługuje. Na przykład, możesz tworzyć nagłówki, listy, linki i wiele innych.
* **AsciiDoc**: Możesz używać [składni AsciiDoc](https://asciidoc.org/), aby formatować swoje komentarze.

## Wzorzec adresu URL {#url-pattern}

**Wzorce adresów URL** są używane do dopasowywania adresów URL w opcjach *Przekieruj z*, *Wykluczone wzorce adresów URL* i *Przetwarzanie grup przechwytujących*. Aby je określić, możesz wybrać **Symbol wieloznaczny** lub **Wyrażenie regularne**.

### Symbol wieloznaczny {#url-pattern-wildcard}

**Symbol wieloznaczny** to prostszy typ wzorca, który pozwala używać `*` (dopasowuje wszystko) i `?` (dopasowuje dowolny pojedynczy znak) jako symboli wieloznacznych. Oto kilka przykładów:

* Aby dopasować `https://example.com/hello`, możesz użyć `https://example.com/*`. Spowoduje to dopasowanie dowolnego ciągu znaków po `https://example.com/`.
* Aby dopasować `https://example.com/search?q=hello`, możesz użyć `https://example.com/search?q=*`. Spowoduje to dopasowanie dowolnej wartości dla parametru `q`.
* Aby dopasować dowolny adres URL zawierający słowo `blog`, możesz użyć `*blog*`.

Możesz również użyć podstawienia w symbolu wieloznacznym, co oznacza, że możesz odwoływać się do części dopasowanego adresu URL za pomocą `$1`, `$2` itd. Na przykład, jeśli użyjesz `https://example.com/*-world-*`, a adresem URL jest `https://example.com/hello-world-goodbye`, to `$1` będzie "hello", a `$2` będzie "goodbye". `$0` jest również dostępne do odwoływania się do całego dopasowania adresu URL.

> [!NOTE]
> Chociaż podstawienie jest cechą wyrażeń regularnych, możesz go również użyć dla symboli wieloznacznych, ponieważ Redirect Web wewnętrznie konwertuje symbol wieloznaczny na wyrażenie regularne.

### Wyrażenie regularne {#url-pattern-regular-expression}

**Wyrażenie regularne** (Regex) to potężne narzędzie do dopasowywania wzorców w tekście i jest również szeroko stosowane w programowaniu. Pozwala zdefiniować konkretny wzorzec, który pasuje do zestawu ciągów znaków. Oto kilka przykładów.

- Aby dopasować `https://example.com/hello`, możesz użyć `https://example.com/.*`. Spowoduje to dopasowanie dowolnego ciągu znaków po `https://example.com/`.
- Aby dopasować `https://example.com/search?q=hello`, możesz użyć `https://example.com/search\?q=(.*)`. Spowoduje to dopasowanie wartości parametru `q` i zapisanie jej w grupie przechwytującej. Następnie możesz odwołać się do niej za pomocą `$1` w opcji *Przekieruj do*.
- Aby dopasować dowolny adres URL zawierający słowo `blog`, możesz użyć `.*blog.*`.

Możesz odwoływać się do grup przechwytujących w *Przekieruj do* lub *Zastąpienie* za pomocą `$1`, `$2`, ... lub `$0`, aby odwołać się do całego dopasowania.

Redirect Web jest zasilany przez [silnik Regex firmy Apple](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042).

Więcej informacji na temat składni Regex można znaleźć w zasobach takich jak [RegExr](https://regexr.com/).
# Noțiuni introductive

Această pagină descrie cazuri de utilizare comune pentru crearea de reguli în aplicația Redirect Web.

(Puteți afla, de asemenea, detalii despre setările regulilor pe pagina [Setări reguli](./rule-settings).)

## Cazul 1: Deschideți un alt site web

Să presupunem că sunteți dependent de Twitter și decideți să meditați în Insight Timer ori de câte ori deschideți accidental Twitter. Să creăm o regulă pentru asta!

### Pasul 1. Configurați "Redirecționare de la"

În primul rând, ar trebui să configurați secțiunea *Redirecționare de la* în ecranul *Editare regulă* din aplicație. Țintele sunt URL-uri care încep cu `https://twitter.com/`.

În acest caz, puteți specifica următorul model cu modul [Wildcard](rule-settings?id=wildcard):

```
https://twitter.com/*
```

În modul Wildcard, `*` înseamnă că se potrivește cu orice (= zero sau mai multe caractere).

Totuși, stați puțin. `twitter.com` a fost redenumit `x.com`. Puteți înlocui pur și simplu `twitter.com` cu `x.com`, dar nimeni nu știe când noul proprietar își va schimba din nou decizia pentru a o anula. Prin urmare, să vizăm atât `twitter.com`, cât și `x.com`.

Pentru a face asta, comutați de la Wildcard la [Expresie Regulatată](rule-settings?id=regular-expression) și setați acest lucru ca model:

```
https://(twitter|x).com/.*
```

* `(twitter|x)`: vizează atât `twitter`, cât și `x`. (`|` este numit *un pipe*.)
* `.*`: Este la fel ca `*` din Wildcard. Mai exact, `.` înseamnă *orice caracter*, iar `*` înseamnă *orice înainte de acest simbol repetat de orice număr de ori*, rezultând că se potrivește cu orice.

Expresia regulară este puțin complicată, dar odată ce vă obișnuiți cu ea, va deveni un instrument puternic. Vă recomandăm să utilizați [RegExr](https://regexr.com) ca un teren de joacă pentru a analiza modul în care funcționează modelul dumneavoastră de expresie regulară.

> [!NOTĂ]
> În Expresiile Regulate, `.` din `(twitter|x).com` este, de asemenea, tratat ca *orice caracter*. Prin urmare, `(twitter|x).com/.*` se potrivește și, de exemplu, `twitter1com/` sau `x_com/`.
>
> Pentru a evita acest lucru, o puteți schimba în `(twitter|x)\.com/.*`. `\` este folosit pentru a anula efectul unui caracter special.
>
> Cu toate acestea, nu există astfel de URL-uri în mediul general de internet. Prin urmare, puteți lăsa `.` ca un caracter special dacă preferați. Regula dvs. este pentru uzul personal, așa că implementați-o așa cum considerați de cuviință.

### Pasul 2: Configurați "Redirecționare către"

Specificați pur și simplu URL-ul astfel:

```
https://insighttimer.com/saraauster/guided-meditations/calm
```

Acum, Redirect Web vă duce la meditație atunci când accesați Twitter!

**[⬇️ Descărcați Regula](/rules/reduce-twitter-addiction.redirectweb)**

## Cazul 2: Eliminarea parametrilor de interogare din URL

Să presupunem că există un parametru de interogare `source=twitter` într-un URL al `example.com` și ați decis să îl eliminați pentru a vă anonimiza.

În acest caz, opțiunea **Procesare Grup de Captură** este cea mai ușoară cale:

*   **Redirecționare de la**: `https://example.com/*` (Wildcard)
*   **Redirecționare către**: `$0`
*   **Procesare Grup de Captură**:
    *   **Grup**: `$0`
    *   **Proces**: Înlocuire Apariții
        *   **Țintă**: `&?source=[^&]*`
        *   **Înlocuire**: *(niciunul)*
        *   **Model Text**: Expresie Regulară

**[⬇️ Descărcați Regula](/rules/remove-parameters.redirectweb)**

Această regulă funcționează astfel:

```
https://example.com/?source=twitter
↪ https://example.com/?

https://example.com/?hello=world&source=twitter&foo=bar
↪ https://example.com/?hello=world&foo=bar
```

Dacă doriți să eliminați mai mulți parametri, adăugați mai multe procese.

## Cazul 3: Adăugarea parametrilor de interogare la URL

Să spunem că există un site web numit `example.com` care afișează un aspect mobil implicit, dar preferați aspectul desktop. Din fericire, site-ul acceptă un parametru de interogare `layout` pentru a specifica ce aspect afișează site-ul. Să creăm o regulă care adaugă `layout=desktop` automat.

Poate că credeți că ați putea defini astfel:

*   **Redirecționare de la**: `https://example.com/.*` (Expresie Regulară)
*   **Redirecționare către**: `$0?layout=desktop`

`$0` se referă la URL-ul țintă. Dacă încercați să accesați `example.com/hello`, sunteți redirecționat către `example.com/hello?layout=desktop`. Această funcționalitate se numește *substituție*.

> [!SFAT]
> Substituția este disponibilă și pentru modul Wildcard, deoarece este convertită intern în Expresie Regulară.

Cu toate acestea, există câteva probleme cu aceste setări.

### Problema 1: Buclă infinită

Setarea actuală creează o buclă infinită de redirecționare, deoarece `https://example.com/.*` vizează și `https://example.com/hello?layout=desktop`.

În acest caz, puteți specifica un model de URL exclus care vă permite să accesați fără redirecționare, așa cum urmează cu o Expresie Regulară:

```
.*[&?]layout=[^&]*.*
```

*   `.*`: Se potrivește cu orice
*   `[&?]`: Se potrivește fie cu `&`, fie cu `?`
*   `[^&]*`: Se potrivește cu orice, cu excepția lui `&`

### Problema 2: Nu poate gestiona corect parametrii existenți

Dacă URL-ul țintă are deja alți parametri de interogare, cum ar fi `example.com/hello?theme=dark`, destinația va fi `example.com/hello?theme=dark?layout=desktop` (Există două `?` în URL), dar puteți uni parametrii doar cu `&`. `?` ca un caracter special este permis numai la începutul parametrilor. Deci nu este tratat ca un parametru valid.

În acest caz, modificați setările astfel:

*   **Redirecționare de la**: `(https://example.com/[^?]*)(\?(.*))?`
*   **Redirecționare către**: `$1?layout=desktop&$3`

Să aruncăm o privire pas cu pas.

*   `(https://example.com/[^?]*)`: Se potrivește cu partea până la caracterul anterior al lui `?`.
    *   `[^?]*` se potrivește cu orice, cu excepția lui `?`.
    *   Acesta este încapsulat cu `()` pentru a-l putea referenția cu `$1` mai târziu.
*   `(\?(.*))?`: Se potrivește cu un șir care începe cu `?`, ceea ce înseamnă parametri de interogare.
    *   Acesta se potrivește și cu șiruri goale datorită cuantificatorului `?` de la sfârșitul modelului, care *se potrivește de zero sau o dată*.
    *   Parantezele exterioare `()` și cele interioare `()` pot fi referențiate cu `$2` și `$3` mai târziu.

[RegExr](https://regexr.com) vă poate ajuta să înțelegeți detaliile.

> [!NOTĂ]
> RegExr afișează o eroare atunci când nu anulați efectul lui `/` cu `\`. Deși îl puteți anula, nu este necesar, deoarece Redirect Web utilizează un motor diferit de la Apple care nu necesită anularea efectului.

Aceasta nu este o soluție perfectă, deoarece redirecționează `example.com/hello` către `example.com/hello?layout=desktop&`, care include un `&` inutil la sfârșitul URL-ului. În general nu este o problemă mare, dar dacă doriți să îl eliminați, puteți utiliza *Procesarea Grupurilor de Captură*.

În concluzie, acesta este rezultatul final:

*   **Redirecționare de la**: `(https://example.com/[^?]*)((\?(.*))?)` (Expresie Regulară)
*   **Redirecționare către**: `$1?layout=desktop$3`
*   **Model URL exclus**: `.*[&?]layout=[^&]*.*` (Expresie Regulară)
*   **Procesare Grup de Captură**:
    *   **Grup**: `$3`
    *   **Proces**: Înlocuire Apariții
        *   **Țintă**: `\?(.*)`
        *   **Înlocuire**: `&$1`

**[⬇️ Descărcați Regula](/rules/add-parameters.redirectweb)**

Acesta este doar un exemplu. Puteți, de asemenea, crea mai multe reguli pentru a gestiona fiecare problemă. Poate fi mult mai simplu.
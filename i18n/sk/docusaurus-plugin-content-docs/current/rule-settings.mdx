# Nastavenia pravidiel

Táto stránka poskytuje podrobné informácie o každom nastavení na obrazovke *Upraviť pravidlo* v aplikácii Redirect Web.

## Možnosti

### Typ {#type}

Zadajte možnosť **Typ**, aby ste určili, ako aplikácia spracováva presmerovanie. Môžete si vybrať z týchto možností:

* **Pôvodný** (Predvolené)
    * Používa tradičné webové API na riadenie presmerovania. Okrem toho používa [Tabs API](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs) ako záložný mechanizmus.
        * Vo Firefoxe používa [WebRequest API](https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/webRequest) na spracovanie presmerovania.
    * Môžete použiť všetky možnosti okrem [Typov zdrojov](#resource-types) a [Metód požiadaviek](#request-methods).
    * Toto je pomalšie ako typ *Deklaratívny* a môže spôsobiť dodatočné sieťové požiadavky.
* **DNR** (Experimentálne pre Safari):
    * Tento typ funguje oveľa rýchlejšie ako pôvodný typ, pretože nespúšťa sieťovú požiadavku pre zdrojovú URL.
    * Umožňuje vám špecifikovať [Typy zdrojov](#resource-types) a [Metódy požiadaviek](#request-methods).
    * ⚠️ Nemôžete použiť niektoré možnosti, ako napríklad [Spracovanie zachytávacej skupiny](#capturing-group-processing) a [Vylúčené vzory URL](#excluded-url-patterns), pretože zatiaľ nie sú podporované API DNR.
    * ⚠️ V Safari momentálne nemôžete do vzoru regulárneho výrazu zahrnúť rúrky (`|`). [Podrobnosti](https://github.com/mshibanami/redirect-web/issues/44)
    * ⚠️ Keďže API DNR v Safari má stále nejaké problémy, považujeme to za experimentálnu funkciu pre Safari. Zoznam všetkých známych problémov nájdete [tu](https://github.com/mshibanami/redirect-web/issues?q=state%3Aopen%20label%3ADNR%20label%3ASafari).

### Presmerovať z {#redirect-from}

Možnosť **Presmerovať z** vám umožňuje špecifikovať vzor URL webových stránok, z ktorých chcete presmerovať. Môžete si vybrať buď [Zástupný znak](#url-pattern-wildcard) alebo [Regulárny výraz](#url-pattern-regular-expression).

Napríklad, ak zadáte `https://example.com/*` so zástupným znakom, zhoduje sa s `https://example.com/` alebo `https://example.com/hello`.

> [!NOTE]
> V možnosti Presmerovať na môžete odkazovať na celý zhodný text pomocou `$0` alebo čiastočné zhody pomocou `$1`, `$2`, ... Podrobnosti nájdete v [Vzore URL](#url-pattern) na tejto stránke.

#### Typy zdrojov {#resource-types}

![Podporované typy: DNR](https://img.shields.io/badge/Types-DNR-blue)

Možnosť **Typy zdrojov** vám umožňuje špecifikovať kategórie webových požiadaviek, ako sú obrázky, JavaScripty a štýly, na ktoré sa pravidlo vzťahuje.
Napríklad, ak nastavíte `script`, môžete presmerovať súbory JavaScriptu načítané webovými stránkami.

Momentálne sú k dispozícii tieto: 
`main_frame`, `sub_frame`, `stylesheet`, `script`, `image`, `font`, `xmlhttprequest`, `ping`, `media`, `websocket`, `other`

Predvolené nastavenie je `main_frame`, čo je stránka najvyššej úrovne načítaná do karty.

Podrobnosti o každom type zdroja nájdete v [mdn web docs](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/ResourceType).

#### Metódy požiadaviek {#request-methods}

![Podporované typy: DNR](https://img.shields.io/badge/Types-DNR-blue)

Možnosť **Metódy požiadaviek** vám umožňuje nastaviť cieľové metódy HTTP zdrojovej URL.

Všetky metódy sú nastavené predvolene.

Podrobnosti o každej metóde nájdete v [mdn web docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods).

> [!WARNING]
> V Safari táto možnosť nemusí byť k dispozícii, pretože implementácia DNR typu od spoločnosti Apple ju momentálne zrejme nepodporuje. Spoločnosti Apple sme poslali spätnú väzbu ako FB14502272.

#### Cieľové prehliadače {#target-browsers}

![Podporované platformy: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Možnosť **Cieľové prehliadače** vám umožňuje špecifikovať, na ktorý prehliadač sa má alebo nemá pravidlo použiť.

* Existujú 2 typy prehliadačov, ktoré si môžete vybrať:
    * **Prehliadače, ktoré si môžete vybrať predvolene**: Predvolene si môžete vybrať Safari, Chrome, Firefox, Edge, Opera, Arc, Brave a Vivaldi. Toto nerozlišuje varianty rovnakého prehliadača, ako napríklad Safari a Safari Technology Preview.
    * **Používateľom špecifikované prehliadače**: Klepnutím na tlačidlo Pridať v rozbaľovacom okne môžete vybrať akýkoľvek prehliadač okrem Safari alebo Safari Technology Preview, ktorý má nainštalované rozšírenie Redirect Web.
* Začiarkavacie políčko **Všetky okrem vybraných** vám umožňuje zacieliť na všetky prehliadače okrem tých, ktoré ste si vybrali.

> [!WARNING]
> Redirect Web nedokáže rozlíšiť, či je prehliadač **Safari** alebo **Safari Technology Preview**, pretože aplikácia kontroluje rodičovský proces rozšírenia, aby ho detekovala, ale tieto dva prehliadače zdieľajú rovnaký rodičovský proces (`/sbin/launchd`).

### Presmerovať na {#redirect-to}

Možnosť **Presmerovať na** špecifikuje cieľovú URL, na ktorú chcete presmerovať zo zdrojovej URL zhodnej s možnosťou *Presmerovať z*. Môžete tiež nahradiť zachytávacie skupiny pomocou `$1`, `$2`, ... alebo celý zhodný text pomocou `$0`. Tieto vám pomôžu dynamicky špecifikovať cieľ. Podrobnosti nájdete v [Vzore URL](#url-pattern) na tejto stránke.

Napríklad, ak nastavíte nasledujúce pravidlo:

* **Presmerovať z**: `https://google.com/*` (Zástupný znak)
* **Presmerovať na**: `https://apple.com/$1`

a zhoduje sa s `https://google.com/hello`, potom cieľová URL bude `https://apple.com/hello`.

Okrem toho môžete upraviť texty `$1`, `$2`, ... pred vykonaním náhrad. Podrobnosti nájdete v sekcii [Spracovanie zachytávacej skupiny](#capturing-group-processing).

> [!TIP]
> Môžete špecifikovať vlastnú schému URL na otvorenie aplikácie. Toto sú príklady aplikácií, ktoré podporujú hlboké prepojenie:
>
> * Figma: `figma://file/Your_Figma_ID`
> * Firefox: `firefox://open-url?url=https://example.com/hello`
> * Google Chrome: `googlechromes://example.com`
> * Microsoft Edge: `microsoft-edge://example.com`
> * Notion: `notion://www.notion.so/Your_Note_ID`
> * Slack: `slack://open`

#### Aplikácia {#application}

![Podporované typy: Pôvodný](https://img.shields.io/badge/Types-Original-blue) ![Podporované platformy: macOS](https://img.shields.io/badge/Platforms-macOS-white)

Ak chcete špecifikovať aplikáciu, ktorú chcete otvoriť cieľovú URL, použite rozbaľovacie pole **Aplikácia**. Toto je k dispozícii iba na macOS.

> [!WARNING]
> Môžete otvoriť iba aplikáciu, ktorá podporuje [App Sandbox](https://developer.apple.com/documentation/security/app_sandbox). Tiež sa uistite, že aplikácia podporuje otváranie URL, ktorú chcete otvoriť.

### Spracovanie zachytávacej skupiny {#capturing-group-processing}

![Podporované typy: Pôvodný](https://img.shields.io/badge/Types-Original-blue)

Možnosť **Spracovanie zachytávacej skupiny** vám umožňuje špecifikovať, ako spracovať zachytávacie skupiny, ktoré môžete nahradiť v možnosti *Presmerovať na* pomocou `$1`, `$2`...

Takto sa vytvárajú zachytávacie skupiny:

* **Zástupný znak**: Texty zhodné s `*` a `?` sa automaticky zachytávajú.
* **Regulárny výraz**: Texty zhodné s časťou vzoru vo vnútri `()` sa zachytávajú.

Môžete si vybrať jeden alebo viac z nasledujúcich procesov:

* **URL Kódovať/Dekódovať**: Toto aplikuje [percentuálne kódovanie](https://en.wikipedia.org/wiki/Percent-encoding) alebo dekódovanie na zachytávaciu skupinu. Napríklad, ak zakódujete `https://example.com/hello`, prevedie sa na `https%3A%2F%2Fexample.com%2Fhello`. Dekódovanie funguje opačným spôsobom.
* **Base64 Kódovať/Dekódovať**: Toto dekóduje/kóduje text do [Base64](https://en.wikipedia.org/wiki/Base64). Napríklad, môžete zakódovať `hello` na `aGVsbG8=` a dekódovať ho späť na `hello`.
* **Nahradiť výskyty**: Toto nahradí jeden alebo viac znakov v skupine, zhodných s **Cieľom**, **Náhradou**. Napríklad, ak je *Skupina* `hello` a *Cieľ* je `l` a Náhrada je `y`, zmení sa na `heyyo`.

> [!NOTE]
> Toto slúži na spracovanie každej zachytávacej skupiny a neovplyvňuje, ktoré URL sú vylúčené [Vylúčenými vzormi URL](#excluded-url-patterns). Napríklad, povedzme, že máte toto pravidlo:
>
> * **Presmerovať z**: `https://example.com/(hello.*)`
> * **Spracovanie zachytávacej skupiny**:
>     * Skupina: `$1`
>     * Cieľ: `.*` (Regulárny výraz)
>     * Náhrada: `hello`
> * **Vylúčený vzor URL**: `https://example.com/hello`
>
> V tomto prípade `https://example.com/hello_world` nebude vylúčené, zatiaľ čo `https://example.com/hello` bude vylúčené.

### Vylúčené vzory URL {#excluded-url-patterns}

![Podporované typy: Pôvodný](https://img.shields.io/badge/Types-Original-blue)

Možnosť **Vylúčené vzory URL** vám umožňuje špecifikovať URL, ktoré nie sú presmerované. To môže byť užitočné na zabránenie slučkám presmerovania alebo na vylúčenie určitých častí webovej stránky z presmerovania.

Vylúčené vzory URL môžete špecifikovať pomocou typov vzorov Regulárny výraz alebo Zástupný znak.

### Príklady {#examples}

Možnosť **Príklady** vám umožňuje otestovať vaše pravidlo presmerovania poskytnutím vzorových URL. Pridaním vzorovej URL môžete skontrolovať, či pravidlo funguje podľa očakávania, predtým ako ho skutočne použijete.

### Komentáre {#comments}

Možnosť **Komentáre** vám umožňuje pridať akékoľvek poznámky alebo komentáre k vášmu pravidlu presmerovania. To môže byť užitočné na sledovanie toho, prečo ste vytvorili konkrétne pravidlo, alebo na poskytnutie kontextu pre ostatných, ktorí by si mohli prezerať vaše pravidlá.

Komentáre môžete písať v nasledujúcich formátoch:

* **Obyčajný text** (Predvolené): Jednoduchý text bez formátovania.
* **Markdown**: Môžete použiť [syntax Markdownu GitHubu](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax), vrátane niektorých rozšírení, ktoré GFM nepodporuje. Napríklad môžete vytvárať nadpisy, zoznamy, odkazy a ďalšie.
* **AsciiDoc**: Na formátovanie komentárov môžete použiť [syntax AsciiDoc](https://asciidoc.org/).

## Vzor URL {#url-pattern}

**Vzory URL** sa používajú na zhodu URL v možnostiach *Presmerovať z*, *Vylúčené vzory URL* a *Spracovanie zachytávacej skupiny*. Na ich špecifikáciu si môžete vybrať buď **Zástupný znak** alebo **Regulárny výraz**.

### Zástupný znak {#url-pattern-wildcard}

**Zástupný znak** je jednoduchší typ vzoru, ktorý vám umožňuje použiť `*` (zhoduje sa s čímkoľvek) a `?` (zhoduje sa s akýmkoľvek jedným znakom) ako zástupné znaky. Tu sú niektoré príklady:

* Ak chcete zhodovať `https://example.com/hello`, môžete použiť `https://example.com/*`. Toto sa zhoduje s akýmkoľvek reťazcom po `https://example.com/`.
* Ak chcete zhodovať `https://example.com/search?q=hello`, môžete použiť `https://example.com/search?q=*`. Toto sa zhoduje s akoukoľvek hodnotou parametra `q`.
* Ak chcete zhodovať akúkoľvek URL, ktorá obsahuje slovo `blog`, môžete použiť `*blog*`.

Môžete tiež použiť substitúciu v zástupnom znaku, čo znamená, že môžete odkazovať na časti zhodnej URL pomocou `$1`, `$2` atď. Napríklad, ak použijete `https://example.com/*-world-*` a URL je `https://example.com/hello-world-goodbye`, potom `$1` by bolo "hello" a `$2` by bolo "goodbye". `$0` je tiež k dispozícii na odkazovanie na celú zhodnú URL.

> [!NOTE]
> Hoci substitúcia je funkcia regulárneho výrazu, môžete ju použiť aj pre zástupný znak, pretože Redirect Web interne konvertuje zástupný znak na regulárny výraz.

### Regulárny výraz {#url-pattern-regular-expression}

**Regulárny výraz** (Regex) je výkonný nástroj na zhodu vzorov v texte a je tiež široko používaný v programovaní. Umožňuje vám definovať špecifický vzor, ktorý sa zhoduje so sadou reťazcov. Tu sú niektoré príklady.

- Ak chcete zhodovať `https://example.com/hello`, môžete použiť `https://example.com/.*`. Toto sa zhoduje s akýmkoľvek reťazcom po `https://example.com/`.
- Ak chcete zhodovať `https://example.com/search?q=hello`, môžete použiť `https://example.com/search\?q=(.*)`. Toto sa zhoduje s hodnotou parametra `q` a uloží ju do zachytávacej skupiny. Potom na ňu môžete odkazovať pomocou `$1` v možnosti *Presmerovať na*.
- Ak chcete zhodovať akúkoľvek URL, ktorá obsahuje slovo `blog`, môžete použiť `.*blog.*`.

Môžete odkazovať na zachytávacie skupiny v *Presmerovať na* alebo *Náhrada* pomocou `$1`, `$2`, ... alebo `$0` na odkazovanie na celú zhodu.

Redirect Web je poháňaný [Regex enginom spoločnosti Apple](https://developer.apple.com/documentation/foundation/nsregularexpression#1661042).

Viac informácií o syntaxi Regex nájdete v zdrojoch ako [RegExr](https://regexr.com/).
